<!doctype html>
<html lang="de" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <title>Family Spots Map ‚Äì Die sch√∂nste Karte f√ºr Familien-Abenteuer</title>
    <meta
      name="description"
      content="Family Spots Map: Die sch√∂nste Karte f√ºr Familien-Abenteuer ‚Äì Spielpl√§tze, Zoos, Wildparks, Pumptracks, familienfreundliche Spots & mehr."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#fb8c00" />

    <link rel="manifest" href="manifest.webmanifest" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="assets/icons/icon-192.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="assets/icons/apple-touch-icon.png"
    />

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <!-- MarkerCluster CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"
    />

    <!-- App-Styles -->
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/badges.css" />
  </head>
  <body>
    <noscript>
      <div class="noscript-warning">
        Family Spots Map ben√∂tigt JavaScript, um korrekt zu funktionieren.
      </div>
    </noscript>

    <div class="app">
      <!-- ======================= -->
      <!-- HEADER                  -->
      <!-- ======================= -->
      <header class="app-header">
        <div class="app-header-top">
          <div class="app-header-left">
            <button
              id="btn-help"
              class="btn-icon"
              type="button"
              aria-label="√úber Family Spots Map"
            >
              ‚ùì
            </button>

            <label for="language-switcher" class="sr-only"
              >Sprache ausw√§hlen</label
            >
            <select
              id="language-switcher"
              class="language-switcher"
              aria-label="Sprache ausw√§hlen"
            >
              <option value="de">DE</option>
              <option value="en">EN</option>
            </select>
          </div>

          <div class="app-header-right">
            <button
              id="theme-toggle"
              class="btn-icon"
              type="button"
              aria-label="Theme wechseln"
            >
              üåì
            </button>
            <button
              id="btn-locate"
              class="btn-icon"
              type="button"
              aria-label="Eigenen Standort anzeigen"
            >
              üìç
            </button>
          </div>
        </div>

        <div class="app-header-main">
          <h1 class="header-title">
            <span class="header-flag" aria-hidden="true">üá©üá™</span>
            Family
            <span class="header-title-spots"> Spots </span>
            Map
            <span class="header-flag" aria-hidden="true">üá©üá∞</span>
          </h1>
          <p class="header-tagline" id="header-tagline"></p>
        </div>
      </header>

      <!-- ======================= -->
      <!-- MAIN                    -->
      <!-- ======================= -->
      <main class="app-main" role="main">
        <!-- MAP VIEW -->
        <section id="view-map" class="view view--active" aria-label="Karte">
          <!-- Sidebar -->
          <aside class="sidebar">
            <!-- Tilla -->
            <section
              id="tilla-section"
              class="sidebar-section tilla-sidebar-section"
              aria-label="Tilla, eure Begleiterin"
            >
              <div class="tilla-sidebar-card">
                <div class="tilla-sidebar-avatar">
                  <img
                    src="assets/tilla/tilla-hero.png"
                    alt="Tilla, eure Schildkr√∂ten-Begleiterin"
                    loading="lazy"
                  />
                </div>
                <div class="tilla-sidebar-text">
                  <p id="tilla-sidebar-text"></p>
                </div>
              </div>
            </section>

            <!-- Familien-Kompass -->
            <details class="sidebar-section" id="compass-section" open>
              <summary class="sidebar-section-header">
                <h2 class="sidebar-section-title" id="compass-label"></h2>
                <button
                  type="button"
                  class="btn-icon sidebar-section-close"
                  data-target="compass-section"
                  aria-label="Kompass-Bereich schlie√üen"
                >
                  √ó
                </button>
              </summary>

              <div class="compass-card">
                <p class="filter-group-helper" id="compass-helper"></p>
                <button
                  type="button"
                  id="compass-apply"
                  class="btn btn-small"
                >
                  <span id="compass-apply-label"></span>
                </button>
              </div>
            </details>

            <!-- Filter-Section -->
            <section class="sidebar-section">
              <header class="sidebar-section-header">
                <h2
                  class="sidebar-section-title"
                  id="filter-title"
                  data-i18n-de="Filter"
                  data-i18n-en="Filters"
                >
                  Filter
                </h2>
                <button
                  id="btn-toggle-filters"
                  class="btn-ghost btn-small"
                  type="button"
                >
                  <span>Filter ausblenden</span>
                </button>
              </header>

              <!-- Suche -->
              <div class="filter-group">
                <label
                  class="filter-group-label"
                  for="filter-search"
                  id="filter-search-label"
                  data-i18n-de="Suche"
                  data-i18n-en="Search"
                >
                  Suche
                </label>
                <input
                  id="filter-search"
                  class="input"
                  type="search"
                  placeholder="Place, spot, keywords ‚Ä¶"
                  autocomplete="off"
                />
              </div>

              <!-- Kategorie -->
              <div class="filter-group">
                <label
                  class="filter-group-label"
                  for="filter-category"
                  id="filter-category-label"
                  data-i18n-de="Kategorie"
                  data-i18n-en="Category"
                >
                  Kategorie
                </label>
                <select id="filter-category" class="input">
                  <option
                    value=""
                    data-i18n-de="Alle Kategorien"
                    data-i18n-en="All categories"
                  >
                    Alle Kategorien
                  </option>
                </select>
              </div>

              <!-- Stimmung -->
              <div class="filter-group">
                <label
                  class="filter-group-label"
                  id="filter-mood-label"
                  data-i18n-de="Stimmung"
                  data-i18n-en="Mood"
                >
                  Stimmung
                </label>
                <p
                  class="filter-group-helper"
                  id="filter-mood-helper"
                  data-i18n-de="Wonach f√ºhlt es sich heute an?"
                  data-i18n-en="What does today feel like?"
                >
                  Wonach f√ºhlt es sich heute an?
                </p>
                <div class="mood-row" aria-label="Stimmung w√§hlen">
                  <button
                    type="button"
                    class="mood-chip"
                    data-mood="relaxed"
                  >
                    <span class="mood-chip-emoji" aria-hidden="true">üåø</span>
                    <span
                      class="mood-chip-label"
                      id="mood-relaxed-label"
                      data-i18n-de="Entspannt"
                      data-i18n-en="Relaxed"
                    >
                      Entspannt
                    </span>
                  </button>
                  <button
                    type="button"
                    class="mood-chip"
                    data-mood="action"
                  >
                    <span class="mood-chip-emoji" aria-hidden="true">‚õ∞Ô∏è</span>
                    <span
                      class="mood-chip-label"
                      id="mood-action-label"
                      data-i18n-de="Bewegung"
                      data-i18n-en="Active"
                    >
                      Bewegung
                    </span>
                  </button>
                  <button
                    type="button"
                    class="mood-chip"
                    data-mood="water"
                  >
                    <span class="mood-chip-emoji" aria-hidden="true">üíß</span>
                    <span
                      class="mood-chip-label"
                      id="mood-water-label"
                      data-i18n-de="Wasser &amp; Sand"
                      data-i18n-en="Water &amp; sand"
                    >
                      Wasser &amp; Sand
                    </span>
                  </button>
                  <button
                    type="button"
                    class="mood-chip"
                    data-mood="animals"
                  >
                    <span class="mood-chip-emoji" aria-hidden="true">üêæ</span>
                    <span
                      class="mood-chip-label"
                      id="mood-animals-label"
                      data-i18n-de="Tier-Tag"
                      data-i18n-en="Animal day"
                    >
                      Tier-Tag
                    </span>
                  </button>
                </div>
              </div>

              <!-- Reise-Modus -->
              <div class="filter-group">
                <label
                  class="filter-group-label"
                  id="filter-travel-label"
                  data-i18n-de="Reise-Modus"
                  data-i18n-en="Travel mode"
                >
                  Reise-Modus
                </label>
                <p
                  class="filter-group-helper"
                  id="filter-travel-helper"
                  data-i18n-de="Seid ihr heute im Alltag unterwegs oder auf Tour mit WoMo, Auto oder Bahn?"
                  data-i18n-en="Are you staying close to home today or travelling by camper, car or train?"
                >
                  Seid ihr heute im Alltag unterwegs oder auf Tour mit WoMo,
                  Auto oder Bahn?
                </p>
                <div class="mood-row" aria-label="Reise-Modus w√§hlen">
                  <button
                    type="button"
                    class="travel-chip"
                    data-travel-mode="everyday"
                  >
                    <span class="mood-chip-emoji" aria-hidden="true">üè°</span>
                    <span
                      class="mood-chip-label"
                      id="travel-everyday-label"
                      data-i18n-de="Alltag"
                      data-i18n-en="Everyday"
                    >
                      Alltag
                    </span>
                  </button>
                  <button
                    type="button"
                    class="travel-chip"
                    data-travel-mode="trip"
                  >
                    <span class="mood-chip-emoji" aria-hidden="true">üöê</span>
                    <span
                      class="mood-chip-label"
                      id="travel-trip-label"
                      data-i18n-de="Unterwegs"
                      data-i18n-en="On the road"
                    >
                      Unterwegs
                    </span>
                  </button>
                </div>
              </div>

              <!-- Alter der Kinder -->
              <div class="filter-group">
                <label
                  class="filter-group-label"
                  for="filter-age"
                  id="filter-age-label"
                  data-i18n-de="Alter der Kinder"
                  data-i18n-en="Age of children"
                >
                  Alter der Kinder
                </label>
                <select id="filter-age" class="input">
                  <option
                    value="all"
                    id="filter-age-all"
                    data-i18n-de="Alle Altersstufen"
                    data-i18n-en="All age groups"
                  >
                    Alle Altersstufen
                  </option>
                  <option
                    value="0-3"
                    id="filter-age-0-3"
                    data-i18n-de="0‚Äì3 Jahre"
                    data-i18n-en="0‚Äì3 years"
                  >
                    0‚Äì3 Jahre
                  </option>
                  <option
                    value="4-9"
                    id="filter-age-4-9"
                    data-i18n-de="4‚Äì9 Jahre"
                    data-i18n-en="4‚Äì9 years"
                  >
                    4‚Äì9 Jahre
                  </option>
                  <option
                    value="10+"
                    id="filter-age-10-plus"
                    data-i18n-de="10+ Jahre"
                    data-i18n-en="10+ years"
                  >
                    10+ Jahre
                  </option>
                </select>
              </div>

              <!-- Micro-Abenteuer-Radius -->
              <div class="filter-group">
                <label
                  class="filter-group-label"
                  for="filter-radius"
                  id="filter-radius-label"
                  data-i18n-de="Micro-Abenteuer-Radius"
                  data-i18n-en="Micro-adventure radius"
                >
                  Micro-Abenteuer-Radius
                </label>
                <p
                  class="filter-group-helper"
                  id="filter-radius-helper"
                  data-i18n-de="Wie weit darf euer Abenteuer heute gehen? Der Radius bezieht sich auf die Kartenmitte (Zuhause, Ferienwohnung, Hotel ‚Ä¶)."
                  data-i18n-en="How far may your adventure go today? The radius relates to the map centre (home, holiday flat, hotel ‚Ä¶)."
                >
                  Wie weit darf euer Abenteuer heute gehen? Der Radius bezieht
                  sich auf die Kartenmitte (Zuhause, Ferienwohnung, Hotel ‚Ä¶).
                </p>
                <div class="radius-row">
                  <input
                    id="filter-radius"
                    type="range"
                    min="0"
                    max="4"
                    step="1"
                    value="4"
                    aria-label="Micro-Abenteuer-Radius"
                  />
                  <span
                    id="filter-radius-max-label"
                    class="radius-max-label"
                    data-i18n-de="Alle Spots"
                    data-i18n-en="All spots"
                  >
                    Alle Spots
                  </span>
                </div>
                <p
                  id="filter-radius-description"
                  class="radius-description"
                  data-i18n-de="Alle Spots ‚Äì ohne Radiusbegrenzung. Die Karte geh√∂rt euch."
                  data-i18n-en="All spots ‚Äì no radius limit. The map is all yours."
                >
                  Alle Spots ‚Äì ohne Radiusbegrenzung. Die Karte geh√∂rt euch.
                </p>
              </div>

              <!-- Checkboxen -->
              <div class="filter-group filter-group--checkbox">
                <label
                  class="checkbox-label"
                  id="filter-big-label"
                >
                  <input id="filter-big-adventures" type="checkbox" />
                  <span
                    data-i18n-de="Nur gro√üe Abenteuer"
                    data-i18n-en="Only big adventures"
                  >
                    Nur gro√üe Abenteuer
                  </span>
                </label>
              </div>

              <div class="filter-group filter-group--checkbox">
                <label
                  class="checkbox-label"
                  id="filter-verified-label"
                >
                  <input id="filter-verified" type="checkbox" />
                  <span
                    data-i18n-de="Nur verifizierte Spots"
                    data-i18n-en="Only verified spots"
                  >
                    Nur verifizierte Spots
                  </span>
                </label>
              </div>

              <div class="filter-group filter-group--checkbox">
                <label
                  class="checkbox-label"
                  id="filter-favs-label"
                >
                  <input id="filter-favorites" type="checkbox" />
                  <span
                    data-i18n-de="Nur Favoriten"
                    data-i18n-en="Only favourites"
                  >
                    Nur Favoriten
                  </span>
                </label>
              </div>
            </section>

            <!-- Spot-Liste -->
            <section
              class="sidebar-section sidebar-section--grow"
              aria-label="Spots"
            >
              <header class="sidebar-section-header">
                <h2 class="sidebar-section-title" id="spots-title">
                  Spots
                </h2>
                <button
                  id="btn-toggle-view"
                  class="btn-ghost btn-small"
                  type="button"
                >
                  <span>Nur Karte</span>
                </button>
              </header>

              <div id="spot-list" class="spot-list"></div>
            </section>

            <!-- Family Spots Plus -->
            <details class="sidebar-section" id="plus-section">
              <summary class="sidebar-section-header">
                <h2 class="sidebar-section-title">Family Spots Plus</h2>
                <button
                  type="button"
                  class="btn-icon sidebar-section-close"
                  data-target="plus-section"
                  aria-label="Family Spots Plus schlie√üen"
                >
                  √ó
                </button>
              </summary>

              <div class="filter-group">
                <p
                  id="plus-status-text"
                  data-i18n-de="Family Spots Plus ist nicht aktiviert."
                  data-i18n-en="Family Spots Plus is not activated."
                >
                  Family Spots Plus ist nicht aktiviert.
                </p>
              </div>

              <div class="plus-code-form">
                <label
                  for="plus-code-input"
                  data-i18n-de="Partner-Code eingeben (z. B. von Campingplatz, Kommune oder Sponsor):"
                  data-i18n-en="Enter partner code (e.g. from campground, municipality or sponsor):"
                >
                  Partner-Code eingeben (z. B. von Campingplatz, Kommune oder
                  Sponsor):
                </label>
                <div class="plus-code-row">
                  <input
                    id="plus-code-input"
                    class="input"
                    type="text"
                    autocomplete="off"
                  />
                  <button
                    id="plus-code-submit"
                    class="btn"
                    type="button"
                  >
                    <span
                      data-i18n-de="Code aktivieren"
                      data-i18n-en="Activate code"
                    >
                      Code aktivieren
                    </span>
                  </button>
                </div>
                <p
                  class="plus-note"
                  data-i18n-de="Family Spots Plus schaltet zus√§tzliche Filter &amp; Spots frei ‚Äì ganz ohne Abo-Falle."
                  data-i18n-en="Family Spots Plus unlocks additional filters &amp; spots ‚Äì with no subscription trap."
                >
                  Family Spots Plus schaltet zus√§tzliche Filter &amp; Spots frei
                  ‚Äì ganz ohne Abo-Falle.
                </p>
              </div>
            </details>

            <!-- Mein Tag -->
            <details class="sidebar-section" id="daylog-section">
              <summary class="sidebar-section-header">
                <h2
                  class="sidebar-section-title"
                  data-i18n-de="Mein Tag üíõ"
                  data-i18n-en="My day üíõ"
                >
                  Mein Tag üíõ
                </h2>
                <button
                  type="button"
                  class="btn-icon sidebar-section-close"
                  data-target="daylog-section"
                  aria-label="Tagesprotokoll schlie√üen"
                >
                  √ó
                </button>
              </summary>

              <div class="filter-group">
                <label
                  for="daylog-text"
                  data-i18n-de="Wie war euer Tag?"
                  data-i18n-en="How was your day?"
                >
                  Wie war euer Tag?
                </label>
                <textarea
                  id="daylog-text"
                  class="input"
                  rows="3"
                  placeholder="Heute waren wir im Wildpark ‚Äì die Ziegen waren sooo s√º√ü!"
                ></textarea>
                <button
                  id="daylog-save"
                  class="btn btn-small"
                  type="button"
                >
                  <span
                    data-i18n-de="Speichern üíæ"
                    data-i18n-en="Save üíæ"
                  >
                    Speichern üíæ
                  </span>
                </button>
              </div>
            </details>
          </aside>

          <!-- Map -->
          <section class="map-section" aria-label="Karte">
            <div id="map" class="map-container"></div>
            <aside
              id="spot-detail"
              class="spot-details spot-details--hidden"
              aria-live="polite"
            ></aside>
          </section>
        </section>

        <!-- ABOUT VIEW -->
        <section
          id="view-about"
          class="view"
          aria-label="√úber Family Spots Map"
        >
          <!-- Deutsch -->
          <article
            id="page-about-de"
            class="page page-about"
            lang="de"
          >
            <h2>√úber Family Spots Map</h2>

            <!-- Tilla-Hero wird von js/tilla.js dynamisch hier eingef√ºgt -->

            <p>
              Family Spots Map ist eine kuratierte Karte f√ºr
              Familien-Abenteuer ‚Äì von Eltern f√ºr Eltern. Statt
              un√ºbersichtlicher Listen oder anonymer Bewertungen findest du
              hier ausgew√§hlte Spielpl√§tze, Zoos, Wildparks, Wasser-Spots,
              Museen, Bewegungsparks und viele weitere Orte, die sich in der
              Praxis bew√§hrt haben.
            </p>
            <!-- ... (Rest deines About-Textes wie gehabt) ... -->
          </article>

          <!-- Englisch -->
          <article
            id="page-about-en"
            class="page page-about hidden"
            lang="en"
          >
            <h2>About Family Spots Map</h2>

            <!-- Tilla-Hero wird von js/tilla.js dynamisch hier eingef√ºgt -->

            <p>
              Family Spots Map is a curated map for family adventures ‚Äì by
              parents for parents.
            </p>
            <!-- ... Rest des EN-Textes ... -->
          </article>
        </section>
      </main>

      <!-- ======================= -->
      <!-- BOTTOM NAV + TOAST      -->
      <!-- ======================= -->
      <nav class="bottom-nav" aria-label="Hauptnavigation">
        <div class="bottom-nav-background" aria-hidden="true"></div>
        <div
          id="bottom-nav-indicator"
          class="bottom-nav-indicator"
          aria-hidden="true"
        ></div>

        <button
          class="bottom-nav-item bottom-nav-item--active"
          type="button"
          data-route="map"
        >
          <span class="bottom-nav-icon" aria-hidden="true">üó∫Ô∏è</span>
          <span id="bottom-nav-map-label">Karte</span>
        </button>

        <button
          class="bottom-nav-item"
          type="button"
          data-route="about"
        >
          <span class="bottom-nav-icon" aria-hidden="true">‚ÑπÔ∏è</span>
          <span id="bottom-nav-about-label">√úber</span>
        </button>
      </nav>

      <!-- Toast -->
      <div id="toast" class="toast" role="status" aria-live="polite"></div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

    <script type="module" src="./js/app.js"></script>

    <!-- Daylog-Placeholder (DE/EN) -->
    <script>
      (function () {
        const textarea = document.getElementById("daylog-text");
        const languageSelect = document.getElementById("language-switcher");
        if (!textarea || !languageSelect) return;

        const placeholders = {
          de: "Heute waren wir im Wildpark ‚Äì die Ziegen waren sooo s√º√ü!",
          en: "Today we went to the wildlife park ‚Äì the goats were sooo cute!",
        };

        function updatePlaceholder(lang) {
          textarea.placeholder = placeholders[lang] || placeholders.de;
        }

        const initialLang =
          languageSelect.value || document.documentElement.lang || "de";
        updatePlaceholder(initialLang);

        languageSelect.addEventListener("change", () => {
          updatePlaceholder(languageSelect.value);
        });
      })();
    </script>
  </body>
</html>