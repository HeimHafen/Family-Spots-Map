<!doctype html>
<html lang="de" dir="ltr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <title>Family Spots Map ‚Äì Die sch√∂nste Karte f√ºr Familien-Abenteuer</title>
  <meta
    name="description"
    content="Family Spots Map: Handverlesene Spielpl√§tze, Zoos, Wildparks, Wasser-Spots & familienfreundliche Orte ‚Äì f√ºr eure n√§chsten Familienabenteuer mit Kindern."
  />

  <!-- Baseline Privacy / UX -->
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="robots" content="index,follow" />
  <meta name="color-scheme" content="light dark" />

  <!-- PWA / Apple -->
  <link rel="manifest" href="/Family-Spots-Map/manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Family Spots Map" />
  <meta name="application-name" content="Family Spots Map" />

  <!-- Theme bootstrap (verhindert Flash + setzt Theme-Color korrekt) -->
  <meta name="theme-color" content="#f7e1d0" id="meta-theme-color" />
  <script>
    (() => {
      const doc = document.documentElement;
      const KEY = "fsm-theme";
      const stored = localStorage.getItem(KEY);
      const prefersDark = window.matchMedia?.("(prefers-color-scheme: dark)")?.matches;
      const theme = stored || (prefersDark ? "dark" : "light");
      doc.dataset.theme = theme;
      doc.style.colorScheme = theme;

      const meta = document.getElementById("meta-theme-color");
      if (meta) meta.setAttribute("content", theme === "dark" ? "#020617" : "#f7e1d0");
    })();
  </script>

  <!-- Critical Background (CSS Custom Properties; verhindert wei√üe R√§nder/Flash bevor CSS l√§dt) -->
  <style>
    :root { --app-bg: #f7e1d0; --app-fg: #0b1220; }
    html[data-theme="dark"] { --app-bg: #020617; --app-fg: #e5e7eb; }
    html, body { margin: 0; min-height: 100%; background: var(--app-bg); color: var(--app-fg); }
  </style>

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="https://heimhafen.github.io/Family-Spots-Map/" />
  <link rel="alternate" hreflang="de" href="https://heimhafen.github.io/Family-Spots-Map/" />
  <link rel="alternate" hreflang="en" href="https://heimhafen.github.io/Family-Spots-Map/en/" />
  <link rel="alternate" hreflang="da" href="https://heimhafen.github.io/Family-Spots-Map/da/" />

  <!-- Open Graph -->
  <meta property="og:title" content="Family Spots Map ‚Äì familienfreundliche Abenteuerkarte" />
  <meta
    property="og:description"
    content="Entdecke handverlesene Spielpl√§tze, Wildparks, Wasser-Spots & mehr ‚Äì ideal f√ºr Familienabenteuer mit Kindern."
  />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://heimhafen.github.io/Family-Spots-Map/" />
  <meta property="og:image" content="https://heimhafen.github.io/Family-Spots-Map/assets/social/og-image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="de_DE" />
  <meta property="og:site_name" content="Family Spots Map" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Family Spots Map ‚Äì familienfreundliche Abenteuerkarte" />
  <meta
    name="twitter:description"
    content="Entdecke ausgew√§hlte Spielpl√§tze, Wildparks, Wasser-Spots u.v.m. ‚Äì ideal f√ºr Familienabenteuer."
  />
  <meta name="twitter:image" content="https://heimhafen.github.io/Family-Spots-Map/assets/social/og-image.png" />

  <!-- Structured Data: WebApplication -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Family Spots Map",
      "operatingSystem": "iOS, Android, Web",
      "applicationCategory": "TravelApplication",
      "url": "https://heimhafen.github.io/Family-Spots-Map/",
      "inLanguage": ["de", "en", "da"],
      "description": "Family Spots Map: Handverlesene Spielpl√§tze, Zoos, Wildparks, Wasser-Spots & familienfreundliche Orte ‚Äì f√ºr eure n√§chsten Familienabenteuer mit Kindern."
    }
  </script>

  <!-- Performance hints -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin />
  <link rel="dns-prefetch" href="//unpkg.com" />

  <!-- Favicon / Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="assets/icons/icon-192.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

  <!-- App Styles -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/components.css?v=2025-12-15" />
  <link rel="stylesheet" href="css/badges.css" />

  <!-- Optional: Module preload (schnellerer App-Start) -->
  <link rel="modulepreload" href="./js/app.js" />
</head>

<body>
  <!-- Inline SVG Sprite (weniger Requests, konsistente Icons) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true" focusable="false">
    <symbol id="i-menu" viewBox="0 0 24 24">
      <path d="M4 6h16M4 12h16M4 18h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-info" viewBox="0 0 24 24">
      <path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M12 10v7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M12 7h.01" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-map" viewBox="0 0 24 24">
      <path d="M9 18 3 20V6l6-2 6 2 6-2v14l-6 2-6-2Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      <path d="M9 4v14M15 6v14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-moon" viewBox="0 0 24 24">
      <path d="M21 13.2A7.5 7.5 0 0 1 10.8 3 8.5 8.5 0 1 0 21 13.2Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
    </symbol>
    <symbol id="i-pin" viewBox="0 0 24 24">
      <path d="M12 22s7-5.1 7-12a7 7 0 1 0-14 0c0 6.9 7 12 7 12Z" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M12 10.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <symbol id="i-close" viewBox="0 0 24 24">
      <path d="M6 6l12 12M18 6 6 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-dice" viewBox="0 0 24 24">
      <path d="M5 7a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2Z" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M9 9h.01M15 15h.01M15 9h.01M9 15h.01M12 12h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </symbol>
  </svg>

  <!-- Globaler Skip-Link -->
  <a
    href="#main-content"
    class="skip-link"
    data-i18n-de="Zum Hauptinhalt springen"
    data-i18n-en="Skip to main content"
    data-i18n-da="Spring til hovedindholdet"
  >
    Zum Hauptinhalt springen
  </a>

  <noscript>
    <div class="noscript-warning" role="alert">
      Family Spots Map ben√∂tigt JavaScript, um korrekt zu funktionieren.
      Bitte JavaScript im Browser aktivieren, um die interaktive Karte und Filter nutzen zu k√∂nnen.
    </div>
  </noscript>

  <div class="app">
    <!-- =========================================
         HEADER
         ========================================= -->
    <header class="app-header" role="banner">
      <nav class="app-header-top" aria-label="App-Einstellungen und Schnellzugriffe">
        <div class="app-header-left">
          <span
            class="sr-only"
            id="language-switcher-label"
            data-i18n-de="Sprache wechseln"
            data-i18n-en="Change language"
            data-i18n-da="Skift sprog"
          >
            Sprache wechseln
          </span>

          <!-- Unsichtbarer, aber funktionaler Sprach-Schalter f√ºr die bestehende Logik -->
          <button
            id="language-switcher"
            class="btn-icon language-switcher sr-only"
            type="button"
            aria-labelledby="language-switcher-label"
          >
            <img
              id="language-switcher-flag"
              class="language-switcher-flag"
              src="assets/flags/flag-de.svg"
              alt=""
              width="24"
              height="24"
              loading="lazy"
              decoding="async"
            />
          </button>
        </div>

        <div class="app-header-right">
          <button
            id="menu-toggle"
            class="btn-icon btn-menu"
            type="button"
            aria-haspopup="dialog"
            aria-expanded="false"
            aria-controls="app-menu"
          >
            <span class="btn-menu-icon" aria-hidden="true">
              <svg class="icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
                <use href="#i-menu"></use>
              </svg>
            </span>
            <span
              class="sr-only"
              data-i18n-de="Men√º √∂ffnen"
              data-i18n-en="Open menu"
              data-i18n-da="√Öbn menu"
            >
              Men√º √∂ffnen
            </span>
          </button>
        </div>
      </nav>

      <div class="app-header-main">
        <h1 class="header-title" id="app-title" tabindex="-1" aria-describedby="header-tagline">
          <span class="header-flag" aria-hidden="true">üá©üá™</span>
          Family <span class="header-title-spots">Spots</span> Map
          <span class="header-flag" aria-hidden="true">üá©üá∞</span>
        </h1>

        <p
          class="header-tagline"
          id="header-tagline"
          data-i18n-de="Heute ist ein guter Tag, an dem aus Alltag ein kleines Familienabenteuer werden darf."
          data-i18n-en="Today is a good day for everyday life to turn into a little family adventure."
          data-i18n-da="I dag er en god dag, hvor hverdagen gerne m√• blive til et lille familieeventyr."
        >
          Heute ist ein guter Tag, an dem aus Alltag ein kleines Familienabenteuer werden darf.
        </p>
      </div>
    </header>

    <!-- =========================================
         HEADER-MEN√ú (‚ò∞)
         + Fokus-Trap Hooks (data-focus-trap + Guards)
         ========================================= -->
    <div
      id="app-menu"
      class="app-menu"
      role="dialog"
      aria-modal="true"
      aria-labelledby="app-menu-title"
      aria-hidden="true"
      hidden
      data-focus-trap="true"
    >
      <div class="app-menu-backdrop" data-menu-close="1" aria-hidden="true"></div>

      <div class="app-menu-panel" tabindex="-1">
        <div class="focus-guard" tabindex="0" data-focus-guard="start" aria-hidden="true"></div>

        <h2 id="app-menu-title" class="sr-only">Men√º</h2>

        <div class="app-menu-list">
          <!-- Info -->
          <button
            id="btn-help"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-info"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              data-i18n-de="√úber Family Spots Map"
              data-i18n-en="About Family Spots Map"
              data-i18n-da="Om Family Spots Map"
            >
              √úber Family Spots Map
            </span>
          </button>

          <!-- Zur Spot-Liste springen -->
          <button
            id="btn-skip-spots"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-map"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              id="skip-to-spots-label"
              data-i18n-de="Zur Spot-Liste springen"
              data-i18n-en="Jump to spot list"
              data-i18n-da="G√• til spotlisten"
            >
              Zur Spot-Liste springen
            </span>
          </button>

          <!-- Theme-Toggle -->
          <button
            id="theme-toggle"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
            aria-pressed="false"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-moon"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              id="theme-toggle-label"
              data-i18n-de="Designmodus wechseln"
              data-i18n-en="Switch color theme"
              data-i18n-da="Skift design-tilstand"
            >
              Designmodus wechseln
            </span>
          </button>

          <!-- Standort -->
          <button
            id="btn-locate"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-pin"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              id="btn-locate-label"
              data-i18n-de="Eigenen Standort auf der Karte anzeigen"
              data-i18n-en="Center map on your location"
              data-i18n-da="Vis din egen position p√• kortet"
            >
              Eigenen Standort auf der Karte anzeigen
            </span>
          </button>
        </div>

        <!-- Sprache: Flaggen-Chips -->
        <div class="app-menu-languages" role="group" aria-labelledby="menu-language-label">
          <p
            id="menu-language-label"
            class="app-menu-languages-label"
            data-i18n-de="Sprache"
            data-i18n-en="Language"
            data-i18n-da="Sprog"
          >
            Sprache
          </p>

          <div class="app-menu-languages-row">
            <button type="button" class="app-menu-lang-chip" data-lang-target="de" aria-pressed="true">
              <span class="app-menu-lang-flag" aria-hidden="true">üá©üá™</span>
              <span class="app-menu-lang-code">DE</span>
            </button>
            <button type="button" class="app-menu-lang-chip" data-lang-target="da" aria-pressed="false">
              <span class="app-menu-lang-flag" aria-hidden="true">üá©üá∞</span>
              <span class="app-menu-lang-code">DA</span>
            </button>
            <button type="button" class="app-menu-lang-chip" data-lang-target="en" aria-pressed="false">
              <span class="app-menu-lang-flag" aria-hidden="true">üá¨üáß</span>
              <span class="app-menu-lang-code">EN</span>
            </button>
          </div>
        </div>

        <div class="focus-guard" tabindex="0" data-focus-guard="end" aria-hidden="true"></div>
      </div>
    </div>

    <!-- =========================================
         MAIN
         ========================================= -->
    <main class="app-main" id="main-content" role="main" tabindex="-1">
      <!-- =======================
           MAP VIEW
           ======================= -->
      <section id="view-map" class="view view--active" aria-label="Karte">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" aria-labelledby="spots-title">
          <!-- Tilla-Begleiterin -->
          <section
            id="tilla-section"
            class="sidebar-section tilla-sidebar-section"
            aria-labelledby="tilla-title"
          >
            <header class="sidebar-section-header">
              <h2
                class="sidebar-section-title"
                id="tilla-title"
                data-i18n-de="Familien-Begleiterin Tilla"
                data-i18n-en="Family companion Tilla"
                data-i18n-da="Familieledsageren Tilla"
              >
                Familien-Begleiterin Tilla
              </h2>
            </header>

            <div class="tilla-sidebar-card">
              <div class="tilla-sidebar-avatar">
                <img
                  src="assets/tilla/tilla-hero.png"
                  alt="Tilla die Schildkr√∂te ‚Äì eure ruhige Familienbegleiterin"
                  loading="eager"
                  decoding="async"
                  fetchpriority="high"
                  width="512"
                  height="512"
                />
              </div>

              <div class="tilla-sidebar-text">
                <p
                  id="tilla-sidebar-text"
                  data-i18n-de="Ich bin Tilla, eure kleine Schildkr√∂te. Alltag darf auch leicht sein. Lass uns schauen, welcher Ort in eurer N√§he euch heute ein L√§cheln zaubert. üåø"
                  data-i18n-en="I‚Äôm Tilla, your little turtle companion. Everyday life can feel light, too. Let‚Äôs see which nearby place might bring a smile to you today. üåø"
                  data-i18n-da="Jeg er Tilla, jeres lille skildpadde. Hverdagen m√• ogs√• gerne f√∏les let. Lad os se, hvilket sted i n√¶rheden der i dag kan trylle et smil frem hos jer. üåø"
                >
                  Ich bin Tilla, eure kleine Schildkr√∂te. Alltag darf auch leicht sein. Lass uns schauen, welcher Ort
                  in eurer N√§he euch heute ein L√§cheln zaubert. üåø
                </p>

                <div class="tilla-sidebar-actions">
                  <button id="btn-play-idea" type="button" class="btn btn-small btn-play-idea">
                    <span class="tilla-play-emoji" aria-hidden="true">
                      <svg class="icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-dice"></use></svg>
                    </span>
                    <span
                      data-i18n-de="Spielideen f√ºr unterwegs"
                      data-i18n-en="Play ideas on the go"
                      data-i18n-da="Legid√©er til turen"
                    >
                      Spielideen f√ºr unterwegs
                    </span>
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Onboarding-Hinweis (VOR den Filtern) -->
          <section
            class="sidebar-section fsm-onboarding-hint"
            data-onboarding-hint
            aria-label="Kurzer Start-Hinweis zur Karte"
          >
            <p class="fsm-onboarding-hint__text">
              <strong
                data-i18n-de="So holt ihr euch euren Spot f√ºr heute:"
                data-i18n-en="How to find your spot for today:"
                data-i18n-da="S√•dan finder I dagens spot:"
              >
                So holt ihr euch euren Spot f√ºr heute:
              </strong>
              <br />
              <span
                data-i18n-de="1. Standort freigeben oder in eure Region zoomen"
                data-i18n-en="1. Share your location or zoom into your region"
                data-i18n-da="1. Del jeres position eller zoom ind p√• jeres omr√•de"
              >
                1. Standort freigeben oder in eure Region zoomen
              </span>
              <br />
              <span
                data-i18n-de="2. Stimmung w√§hlen"
                data-i18n-en="2. Choose a mood"
                data-i18n-da="2. V√¶lg stemning"
              >
                2. Stimmung w√§hlen
              </span>
              <br />
              <span
                data-i18n-de="3. Auf einen Spot tippen ‚Äì los geht‚Äôs."
                data-i18n-en="3. Tap a spot ‚Äì and off you go."
                data-i18n-da="3. Tryk p√• et spot ‚Äì s√• er I i gang."
              >
                3. Auf einen Spot tippen ‚Äì los geht‚Äôs.
              </span>
            </p>

            <button type="button" class="fsm-onboarding-hint__close" aria-label="Hinweis schlie√üen">
              <svg class="icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-close"></use></svg>
            </button>
          </section>

          <!-- Kompakter Filter -->
          <section class="sidebar-section" id="filter-section" aria-labelledby="filter-title">
            <header class="sidebar-section-header">
              <h2
                class="sidebar-section-title"
                id="filter-title"
                data-i18n-de="Filter"
                data-i18n-en="Filters"
                data-i18n-da="Filtre"
              >
                Filter
              </h2>

              <button
                id="btn-toggle-filters"
                class="btn-ghost btn-small"
                type="button"
                aria-controls="filter-section"
                aria-expanded="false"
              >
                <span
                  data-i18n-de="Filter anzeigen"
                  data-i18n-en="Show filters"
                  data-i18n-da="Vis filtre"
                >
                  Filter anzeigen
                </span>
              </button>
            </header>

            <p
              class="filter-group-helper filter-group-helper--compact"
              data-i18n-de="Suche, Stimmung &amp; Radius ‚Äì alles, was ihr f√ºr den Start braucht. Weitere Filter √∂ffnen sich bei Bedarf."
              data-i18n-en="Search, mood &amp; radius ‚Äì everything you need to get started. Open all filters only when needed."
              data-i18n-da="S√∏gning, stemning &amp; radius ‚Äì alt det vigtigste til at starte med. √Öbn alle filtre efter behov."
            >
              Suche, Stimmung &amp; Radius ‚Äì alles, was ihr f√ºr den Start braucht. Weitere Filter √∂ffnen sich bei
              Bedarf.
            </p>

            <!-- Suche -->
            <div class="filter-group">
              <label
                class="filter-group-label"
                for="filter-search"
                id="filter-search-label"
                data-i18n-de="Suche"
                data-i18n-en="Search"
                data-i18n-da="S√∏g"
              >
                Suche
              </label>
              <input
                id="filter-search"
                name="search"
                class="input"
                type="search"
                placeholder="Ort, Spot, Stichwort ‚Ä¶"
                autocomplete="off"
                enterkeyhint="search"
                inputmode="search"
                data-i18n-de="Ort, Spot, Stichwort ‚Ä¶"
                data-i18n-en="Place, spot, keywords ‚Ä¶"
                data-i18n-da="Sted, spot, s√∏geord ‚Ä¶"
              />
            </div>

            <!-- Stimmung -->
            <div class="filter-group">
              <label
                class="filter-group-label"
                id="filter-mood-label"
                data-i18n-de="Stimmung"
                data-i18n-en="Mood"
                data-i18n-da="Stemning"
              >
                Stimmung
              </label>

              <p
                class="filter-group-helper filter-group-helper--compact"
                id="filter-mood-helper"
                data-i18n-de="Ruhe, Bewegung, Wasser oder ein Tag mit Tieren?"
                data-i18n-en="Calm, movement, water or a day with animals?"
                data-i18n-da="Ro, bev√¶gelse, vand eller en dag med dyr?"
              >
                Ruhe, Bewegung, Wasser oder ein Tag mit Tieren?
              </p>

              <div
                class="mood-row"
                role="group"
                aria-labelledby="filter-mood-label"
                aria-describedby="filter-mood-helper"
              >
                <button type="button" class="mood-chip" data-mood="relaxed" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">üåø</span>
                  <span class="mood-chip-label" id="mood-relaxed-label"
                    data-i18n-de="Entspannt" data-i18n-en="Relaxed" data-i18n-da="Afslappet"
                  >
                    Entspannt
                  </span>
                </button>

                <button type="button" class="mood-chip" data-mood="action" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">‚õ∞Ô∏è</span>
                  <span class="mood-chip-label" id="mood-action-label"
                    data-i18n-de="Bewegung" data-i18n-en="Active" data-i18n-da="Aktiv"
                  >
                    Bewegung
                  </span>
                </button>

                <button type="button" class="mood-chip" data-mood="water" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">üíß</span>
                  <span class="mood-chip-label" id="mood-water-label"
                    data-i18n-de="Wasser &amp; Sand" data-i18n-en="Water &amp; sand" data-i18n-da="Vand &amp; sand"
                  >
                    Wasser &amp; Sand
                  </span>
                </button>

                <button type="button" class="mood-chip" data-mood="animals" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">üêæ</span>
                  <span class="mood-chip-label" id="mood-animals-label"
                    data-i18n-de="Tier-Tag" data-i18n-en="Animal day" data-i18n-da="Dyredag"
                  >
                    Tier-Tag
                  </span>
                </button>
              </div>
            </div>

            <!-- Micro-Abenteuer-Radius -->
            <div class="filter-group">
              <label
                class="filter-group-label"
                for="filter-radius"
                id="filter-radius-label"
                data-i18n-de="Micro-Abenteuer-Radius"
                data-i18n-en="Micro-adventure radius"
                data-i18n-da="Mikroeventyr-radius"
              >
                Micro-Abenteuer-Radius
              </label>

              <p
                class="filter-group-helper filter-group-helper--compact"
                id="filter-radius-helper"
                data-i18n-de="Wie weit darf euer Abenteuer heute gehen?"
                data-i18n-en="How far may your adventure go today?"
                data-i18n-da="Hvor langt m√• jeres eventyr r√¶kke i dag?"
              >
                Wie weit darf euer Abenteuer heute gehen?
              </p>

              <div class="radius-row">
                <input
                  id="filter-radius"
                  name="radius"
                  type="range"
                  min="0"
                  max="4"
                  step="1"
                  value="4"
                  aria-labelledby="filter-radius-label filter-radius-helper filter-radius-description"
                />
                <span
                  id="filter-radius-max-label"
                  class="radius-max-label"
                  data-i18n-de="Alle Spots"
                  data-i18n-en="All spots"
                  data-i18n-da="Alle spots"
                >
                  Alle Spots
                </span>
              </div>

              <p
                id="filter-radius-description"
                class="radius-description"
                data-i18n-de="Alle Spots ‚Äì ohne Radiusbegrenzung. Die Karte geh√∂rt euch."
                data-i18n-en="All spots ‚Äì no radius limit. The map is all yours."
                data-i18n-da="Alle spots ‚Äì ingen radiusbegr√¶nsning. Kortet er helt jeres."
              >
                Alle Spots ‚Äì ohne Radiusbegrenzung. Die Karte geh√∂rt euch.
              </p>
            </div>

            <!-- Zusammenfassung & Button "Alle Filter √∂ffnen" -->
            <div class="filter-footer">
              <button id="btn-open-filter-modal" class="btn btn-small" type="button">
                <span data-i18n-de="Alle Filter √∂ffnen" data-i18n-en="Open all filters" data-i18n-da="√Öbn alle filtre">
                  Alle Filter √∂ffnen
                </span>
              </button>

              <p
                id="filter-summary"
                class="filter-summary"
                data-i18n-de="Aktive Filter: Basisfilter"
                data-i18n-en="Active filters: basic filters"
                data-i18n-da="Aktive filtre: basisfiltre"
              >
                Aktive Filter: Basisfilter
              </p>
            </div>
          </section>

          <!-- Spot-Liste -->
          <section class="sidebar-section sidebar-section--grow" aria-labelledby="spots-title">
            <header class="sidebar-section-header">
              <h2 class="sidebar-section-title" id="spots-title">Spots</h2>

              <button
                id="btn-toggle-view"
                class="btn-ghost btn-small"
                type="button"
                aria-pressed="false"
                aria-controls="sidebar"
              >
                <span data-i18n-de="Nur Karte" data-i18n-en="Map only" data-i18n-da="Kun kort">
                  Nur Karte
                </span>
              </button>
            </header>

            <div id="spot-list" class="spot-list"><!-- Karten via JS --></div>
          </section>
        </aside>

        <!-- Karte + Details -->
        <section class="map-section" aria-label="Karte mit Spots">
          <div id="map" class="map-container" role="region" aria-label="Interaktive Karte"></div>
          <aside
            id="spot-detail"
            class="spot-details spot-details--hidden"
            aria-live="polite"
            aria-atomic="true"
          ></aside>
        </section>

        <!-- Family Spots Plus -->
        <details class="sidebar-section" id="plus-section" aria-labelledby="plus-section-title">
          <summary class="sidebar-section-header">
            <h2 class="sidebar-section-title" id="plus-section-title">Family Spots Plus</h2>
            <button id="btn-toggle-plus" class="btn-ghost btn-small" type="button">
              <span data-i18n-de="Anzeigen" data-i18n-en="Show" data-i18n-da="Vis">Anzeigen</span>
            </button>
          </summary>

          <div class="filter-group">
            <p
              id="plus-status-text"
              data-i18n-de="Family Spots Plus ist nicht aktiviert."
              data-i18n-en="Family Spots Plus is not activated."
              data-i18n-da="Family Spots Plus er ikke aktiveret."
            >
              Family Spots Plus ist nicht aktiviert.
            </p>
          </div>

          <div class="plus-code-form">
            <label
              for="plus-code-input"
              data-i18n-de="Partner-Code eingeben (z. B. von Campingplatz, Kommune oder Sponsor):"
              data-i18n-en="Enter partner code (e.g. from campground, municipality or sponsor):"
              data-i18n-da="Indtast partnerkode (f.eks. fra campingplads, kommune eller sponsor):"
            >
              Partner-Code eingeben (z. B. von Campingplatz, Kommune oder Sponsor):
            </label>

            <div class="plus-code-row">
              <input id="plus-code-input" name="plus-code" class="input" type="text" autocomplete="off" />
              <button id="plus-code-submit" class="btn" type="button">
                <span data-i18n-de="Code aktivieren" data-i18n-en="Activate code" data-i18n-da="Aktiv√©r kode">
                  Code aktivieren
                </span>
              </button>
            </div>

            <p
              class="plus-note"
              data-i18n-de="Family Spots Plus schaltet zus√§tzliche Filter &amp; Spots frei ‚Äì ganz ohne Abo-Falle."
              data-i18n-en="Family Spots Plus unlocks additional filters &amp; spots ‚Äì with no subscription trap."
              data-i18n-da="Family Spots Plus l√•ser op for ekstra filtre &amp; spots ‚Äì helt uden abonnementsf√¶lder."
            >
              Family Spots Plus schaltet zus√§tzliche Filter &amp; Spots frei ‚Äì ganz ohne Abo-Falle.
            </p>
          </div>
        </details>

        <!-- Mein Tag -->
        <details class="sidebar-section" id="daylog-section" aria-labelledby="daylog-section-title">
          <summary class="sidebar-section-header">
            <h2 class="sidebar-section-title" id="daylog-section-title"
              data-i18n-de="Mein Tag üíö" data-i18n-en="My day üíö" data-i18n-da="Min dag üíö"
            >
              Mein Tag üíö
            </h2>

            <button id="btn-toggle-daylog" class="btn-ghost btn-small" type="button">
              <span data-i18n-de="Anzeigen" data-i18n-en="Show" data-i18n-da="Vis">Anzeigen</span>
            </button>
          </summary>

          <div class="filter-group">
            <label
              for="daylog-text"
              data-i18n-de="Wie war euer Tag?"
              data-i18n-en="How was your day?"
              data-i18n-da="Hvordan var jeres dag?"
            >
              Wie war euer Tag?
            </label>

            <p
              class="filter-group-helper"
              data-i18n-de="Halte einen kleinen Moment fest, an den ihr euch sp√§ter erinnern m√∂chtet ‚Äì wenn du magst, mit einem Gru√ü an Tilla."
              data-i18n-en="Capture a little moment you‚Äôd like to remember later ‚Äì and if you like, add a small note to Tilla."
              data-i18n-da="Gem et lille √∏jeblik, som I gerne vil huske senere ‚Äì og hvis du har lyst, med en lille hilsen til Tilla."
            >
              Halte einen kleinen Moment fest, an den ihr euch sp√§ter erinnern m√∂chtet ‚Äì wenn du magst, mit einem Gru√ü
              an Tilla.
            </p>

            <textarea
              id="daylog-text"
              name="daylog"
              class="input"
              rows="3"
              placeholder="Heute haben wir einen Ort gefunden, an dem die Zeit kurz langsamer wurde."
            ></textarea>

            <button id="daylog-save" class="btn btn-small" type="button">
              <span data-i18n-de="Speichern üíæ" data-i18n-en="Save üíæ" data-i18n-da="Gem üíæ">Speichern üíæ</span>
            </button>

            <div class="daylog-meta-row">
              <p
                id="daylog-last-saved"
                class="daylog-last-saved"
                data-i18n-de="Noch nichts gespeichert."
                data-i18n-en="Nothing saved yet."
                data-i18n-da="Ingen gemte endnu."
              >
                Noch nichts gespeichert.
              </p>

              <button id="daylog-clear" class="btn-ghost btn-small daylog-clear-btn hidden" type="button">
                <span data-i18n-de="Eintrag l√∂schen" data-i18n-en="Delete entry" data-i18n-da="Slet notat">
                  Eintrag l√∂schen
                </span>
              </button>
            </div>

            <div id="daylog-list" class="daylog-list"></div>
          </div>
        </details>
      </section>

      <!-- =========================================
           ABOUT VIEW (DE / DA / EN)
           ========================================= -->
      <section id="view-about" class="view" aria-label="√úber Family Spots Map">
        <!-- Deutsch -->
        <article id="page-about-de" class="page page-about" lang="de" aria-hidden="false">
          <!-- (Inhalt unver√§ndert) -->
          <h2>√úber Family Spots Map</h2>
          <!-- ... dein kompletter About-Content bleibt exakt wie gehabt ... -->
          <p>Aktuelle Karten-Version: <strong>2025-12-01</strong></p>
        </article>

        <!-- Dansk -->
        <article id="page-about-da" class="page page-about hidden" lang="da" aria-hidden="true">
          <!-- (Inhalt unver√§ndert) -->
          <h2>Om Family Spots Map</h2>
          <p>Aktuel kortversion: <strong>2025-12-01</strong></p>
        </article>

        <!-- Englisch -->
        <article id="page-about-en" class="page page-about hidden" lang="en" aria-hidden="true">
          <!-- (Inhalt unver√§ndert) -->
          <h2>About Family Spots Map</h2>
          <p>Current map version: <strong>2025-12-01</strong></p>
        </article>
      </section>

      <!-- =========================================
           FILTER-MODAL: ALLE FILTER
           + Fokus-Trap Hooks (data-focus-trap + Guards)
           ========================================= -->
      <div
        id="filter-modal"
        class="filter-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="filter-modal-title"
        hidden
        data-focus-trap="true"
      >
        <div class="filter-modal-inner" tabindex="-1">
          <div class="focus-guard" tabindex="0" data-focus-guard="start" aria-hidden="true"></div>

          <header class="filter-modal-header">
            <h2
              id="filter-modal-title"
              data-i18n-de="Alle Filter"
              data-i18n-en="All filters"
              data-i18n-da="Alle filtre"
            >
              Alle Filter
            </h2>

            <button
              id="filter-modal-close"
              class="btn-ghost btn-small filter-modal-close-btn"
              type="button"
            >
              <span
                data-i18n-de="Alle Filter ausblenden"
                data-i18n-en="Hide all filters"
                data-i18n-da="Skjul alle filtre"
              >
                Alle Filter ausblenden
              </span>
            </button>
          </header>

          <div class="filter-modal-body">
            <!-- (Rest unver√§ndert) -->
          </div>

          <footer class="filter-modal-footer">
            <button id="filter-modal-reset" class="btn-ghost" type="button">
              <span data-i18n-de="Filter zur√ºcksetzen" data-i18n-en="Reset filters" data-i18n-da="Nulstil filtre">
                Filter zur√ºcksetzen
              </span>
            </button>

            <button id="filter-modal-apply" class="btn" type="button">
              <span data-i18n-de="Filter anwenden" data-i18n-en="Apply filters" data-i18n-da="Brug filtre">
                Filter anwenden
              </span>
            </button>
          </footer>

          <div class="focus-guard" tabindex="0" data-focus-guard="end" aria-hidden="true"></div>
        </div>
      </div>
    </main>

    <!-- Bottom Navigation: im UI entfernt (hidden), bleibt aber im DOM f√ºr Router/JS -->
    <nav class="bottom-nav" aria-label="Navigation" hidden aria-hidden="true">
      <button class="bottom-nav-item" type="button" data-route="map" aria-pressed="true">
        <span id="bottom-nav-map-label" data-i18n-de="Karte" data-i18n-en="Map" data-i18n-da="Kort">Karte</span>
      </button>
      <button class="bottom-nav-item" type="button" data-route="about" aria-pressed="false">
        <span id="bottom-nav-about-label" data-i18n-de="√úber" data-i18n-en="About" data-i18n-da="Om">√úber</span>
      </button>
    </nav>

    <!-- Toast -->
    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>
  </div>

  <!-- Landscape-Warnung -->
  <div class="landscape-warning" aria-hidden="true">
    <span aria-hidden="true">
      Bitte Ger√§t drehen üì±üîÑ ‚Äì im Hochformat f√ºhlt sich Tilla in der Family Spots Map ein bisschen wohler.
    </span>
  </div>

  <!-- Scripts: Leaflet + MarkerCluster -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin="anonymous"
    defer
  ></script>
  <script
    src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"
    defer
  ></script>

  <!-- Onboarding-Hinweis (ES-Modul) -->
  <script type="module" src="./js/onboarding-hint.js"></script>

  <!-- Details/Summary Fix (ES-Modul) -->
  <script type="module" src="./js/ui/details-summary-fix.js"></script>

  <!-- App (ES-Modul) -->
  <script type="module" src="./js/app.js"></script>

  <!-- Optional: Fokus-Trap (f√ºr Dialoge mit data-focus-trap="true") -->
  <script type="module">
    const getFocusable = (root) => {
      const sel = [
        'a[href]',
        'area[href]',
        'button:not([disabled])',
        'input:not([disabled]):not([type="hidden"])',
        'select:not([disabled])',
        'textarea:not([disabled])',
        '[tabindex]:not([tabindex="-1"])'
      ].join(',');
      return Array.from(root.querySelectorAll(sel)).filter(el => {
        const style = window.getComputedStyle(el);
        return style.visibility !== 'hidden' && style.display !== 'none';
      });
    };

    const traps = Array.from(document.querySelectorAll('[data-focus-trap="true"]'));
    traps.forEach((dialog) => {
      dialog.addEventListener('keydown', (e) => {
        if (e.key !== 'Tab') return;
        const focusables = getFocusable(dialog);
        if (!focusables.length) return;

        const first = focusables[0];
        const last = focusables[focusables.length - 1];
        const active = document.activeElement;

        if (e.shiftKey && active === first) {
          e.preventDefault();
          last.focus();
        } else if (!e.shiftKey && active === last) {
          e.preventDefault();
          first.focus();
        }
      });

      dialog.addEventListener('focusin', (e) => {
        if (dialog.hasAttribute('hidden') || dialog.getAttribute('aria-hidden') === 'true') return;
        if (dialog.contains(e.target)) return;
        const focusables = getFocusable(dialog);
        (focusables[0] || dialog).focus();
      });
    });
  </script>

  <!-- Service Worker Registration (Offline-Caching Hook)
       Erwartet sw.js unter /Family-Spots-Map/sw.js -->
  <script type="module">
    try {
      if ("serviceWorker" in navigator) {
        const scope = "/Family-Spots-Map/";
        const swUrl = new URL("sw.js", location.origin + scope).toString();
        navigator.serviceWorker.register(swUrl, { scope });
      }
    } catch { /* silent */ }
  </script>
</body>
</html>