<!doctype html>
<html lang="de" dir="ltr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <title>Family Spots Map â€“ Die schÃ¶nste Karte fÃ¼r Familien-Abenteuer</title>
  <meta
    name="description"
    content="Family Spots Map: Handverlesene SpielplÃ¤tze, Zoos, Wildparks, Wasser-Spots & familienfreundliche Orte â€“ fÃ¼r eure nÃ¤chsten Familienabenteuer mit Kindern."
  />

  <!-- Baseline Privacy / UX -->
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="robots" content="index,follow" />
  <meta name="color-scheme" content="light dark" />

  <!-- PWA / Apple -->
  <link rel="manifest" href="/Family-Spots-Map/manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Family Spots Map" />
  <meta name="application-name" content="Family Spots Map" />

  <!-- Theme bootstrap (verhindert Flash + setzt Theme-Color korrekt) -->
  <meta name="theme-color" content="#f7e1d0" id="meta-theme-color" />
  <script>
    (() => {
      const doc = document.documentElement;
      const KEY = "fsm-theme";
      const stored = localStorage.getItem(KEY);
      const prefersDark = window.matchMedia?.("(prefers-color-scheme: dark)")?.matches;
      const theme = stored || (prefersDark ? "dark" : "light");
      doc.dataset.theme = theme;
      doc.style.colorScheme = theme;

      const meta = document.getElementById("meta-theme-color");
      if (meta) meta.setAttribute("content", theme === "dark" ? "#020617" : "#f7e1d0");
    })();
  </script>

  <!-- Critical Background (CSS Custom Properties; verhindert weiÃŸe RÃ¤nder/Flash bevor CSS lÃ¤dt) -->
  <style>
    :root { --app-bg: #f7e1d0; --app-fg: #0b1220; }
    html[data-theme="dark"] { --app-bg: #020617; --app-fg: #e5e7eb; }
    html, body { margin: 0; min-height: 100%; background: var(--app-bg); color: var(--app-fg); }
  </style>

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="https://heimhafen.github.io/Family-Spots-Map/" />
  <link rel="alternate" hreflang="de" href="https://heimhafen.github.io/Family-Spots-Map/" />
  <link rel="alternate" hreflang="en" href="https://heimhafen.github.io/Family-Spots-Map/en/" />
  <link rel="alternate" hreflang="da" href="https://heimhafen.github.io/Family-Spots-Map/da/" />

  <!-- Open Graph -->
  <meta property="og:title" content="Family Spots Map â€“ familienfreundliche Abenteuerkarte" />
  <meta
    property="og:description"
    content="Entdecke handverlesene SpielplÃ¤tze, Wildparks, Wasser-Spots & mehr â€“ ideal fÃ¼r Familienabenteuer mit Kindern."
  />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://heimhafen.github.io/Family-Spots-Map/" />
  <meta property="og:image" content="https://heimhafen.github.io/Family-Spots-Map/assets/social/og-image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="de_DE" />
  <meta property="og:site_name" content="Family Spots Map" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Family Spots Map â€“ familienfreundliche Abenteuerkarte" />
  <meta
    name="twitter:description"
    content="Entdecke ausgewÃ¤hlte SpielplÃ¤tze, Wildparks, Wasser-Spots u.v.m. â€“ ideal fÃ¼r Familienabenteuer."
  />
  <meta name="twitter:image" content="https://heimhafen.github.io/Family-Spots-Map/assets/social/og-image.png" />

  <!-- Structured Data: WebApplication -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Family Spots Map",
      "operatingSystem": "iOS, Android, Web",
      "applicationCategory": "TravelApplication",
      "url": "https://heimhafen.github.io/Family-Spots-Map/",
      "inLanguage": ["de", "en", "da"],
      "description": "Family Spots Map: Handverlesene SpielplÃ¤tze, Zoos, Wildparks, Wasser-Spots & familienfreundliche Orte â€“ fÃ¼r eure nÃ¤chsten Familienabenteuer mit Kindern."
    }
  </script>

  <!-- Performance hints -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin />
  <link rel="dns-prefetch" href="//unpkg.com" />

  <!-- Favicon / Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="assets/icons/icon-192.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

  <!-- App Styles -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/badges.css" />

  <!-- Optional: Module preload (schnellerer App-Start) -->
  <link rel="modulepreload" href="./js/app.js" />

  <!-- âœ… Mobile UI Slim Overrides (Boxen schmaler, SchriftgrÃ¶ÃŸe bleibt gleich) -->
  <style>
    @media (max-width: 720px) {
      /* Boxen-Header (Filter/Spots/Plus/Mein Tag) */
      .sidebar-section-header {
        padding: 10px 14px !important;
        min-height: 44px !important;
      }
      summary.sidebar-section-header {
        padding: 10px 14px !important;
        min-height: 44px !important;
      }

      /* Titel-Block: weniger Luft ohne Font-Ã„nderung */
      .sidebar-section-title {
        margin: 0 !important;
        line-height: 1.2 !important;
      }

      /* Rechte Buttons/Labels weniger hoch, aber gleiche SchriftgrÃ¶ÃŸe */
      .btn-ghost.btn-small,
      .btn.btn-small {
        padding-top: 6px !important;
        padding-bottom: 6px !important;
      }

      /* Abstand zwischen Boxen etwas kompakter */
      .sidebar .sidebar-section {
        margin-bottom: 10px !important;
      }

      /* MenÃ¼-Items kompakter (optional, wirkt auf iPhone â€saubererâ€œ) */
      .app-menu-item {
        padding-top: 10px !important;
        padding-bottom: 10px !important;
      }
    }
  </style>
</head>

<body>
  <!-- Inline SVG Sprite (weniger Requests, konsistente Icons) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true" focusable="false">
    <symbol id="i-menu" viewBox="0 0 24 24">
      <path d="M4 6h16M4 12h16M4 18h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-info" viewBox="0 0 24 24">
      <path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M12 10v7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M12 7h.01" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-map" viewBox="0 0 24 24">
      <path d="M9 18 3 20V6l6-2 6 2 6-2v14l-6 2-6-2Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      <path d="M9 4v14M15 6v14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-moon" viewBox="0 0 24 24">
      <path d="M21 13.2A7.5 7.5 0 0 1 10.8 3 8.5 8.5 0 1 0 21 13.2Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
    </symbol>
    <symbol id="i-pin" viewBox="0 0 24 24">
      <path d="M12 22s7-5.1 7-12a7 7 0 1 0-14 0c0 6.9 7 12 7 12Z" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M12 10.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <symbol id="i-close" viewBox="0 0 24 24">
      <path d="M6 6l12 12M18 6 6 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-dice" viewBox="0 0 24 24">
      <path d="M5 7a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2Z" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M9 9h.01M15 15h.01M15 9h.01M9 15h.01M12 12h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </symbol>
  </svg>

  <!-- Globaler Skip-Link -->
  <a
    href="#main-content"
    class="skip-link"
    data-i18n-de="Zum Hauptinhalt springen"
    data-i18n-en="Skip to main content"
    data-i18n-da="Spring til hovedindholdet"
  >
    Zum Hauptinhalt springen
  </a>

  <noscript>
    <div class="noscript-warning" role="alert">
      Family Spots Map benÃ¶tigt JavaScript, um korrekt zu funktionieren.
      Bitte JavaScript im Browser aktivieren, um die interaktive Karte und Filter nutzen zu kÃ¶nnen.
    </div>
  </noscript>

  <div class="app">
    <!-- =========================================
         HEADER
         ========================================= -->
    <header class="app-header" role="banner">
      <nav class="app-header-top" aria-label="App-Einstellungen und Schnellzugriffe">
        <div class="app-header-left">
          <span
            class="sr-only"
            id="language-switcher-label"
            data-i18n-de="Sprache wechseln"
            data-i18n-en="Change language"
            data-i18n-da="Skift sprog"
          >
            Sprache wechseln
          </span>

          <!-- Unsichtbarer, aber funktionaler Sprach-Schalter fÃ¼r die bestehende Logik -->
          <button
            id="language-switcher"
            class="btn-icon language-switcher sr-only"
            type="button"
            aria-labelledby="language-switcher-label"
          >
            <img
              id="language-switcher-flag"
              class="language-switcher-flag"
              src="assets/flags/flag-de.svg"
              alt=""
              width="24"
              height="24"
              loading="lazy"
              decoding="async"
            />
          </button>
        </div>

        <div class="app-header-right">
          <button
            id="menu-toggle"
            class="btn-icon btn-menu"
            type="button"
            aria-haspopup="dialog"
            aria-expanded="false"
            aria-controls="app-menu"
          >
            <span class="btn-menu-icon" aria-hidden="true">
              <svg class="icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
                <use href="#i-menu"></use>
              </svg>
            </span>
            <span
              class="sr-only"
              data-i18n-de="MenÃ¼ Ã¶ffnen"
              data-i18n-en="Open menu"
              data-i18n-da="Ã…bn menu"
            >
              MenÃ¼ Ã¶ffnen
            </span>
          </button>
        </div>
      </nav>

      <div class="app-header-main">
        <h1 class="header-title" id="app-title" tabindex="-1" aria-describedby="header-tagline">
          <span class="header-flag" aria-hidden="true">ğŸ‡©ğŸ‡ª</span>
          Family <span class="header-title-spots">Spots</span> Map
          <span class="header-flag" aria-hidden="true">ğŸ‡©ğŸ‡°</span>
        </h1>

        <p
          class="header-tagline"
          id="header-tagline"
          data-i18n-de="Heute ist ein guter Tag, an dem aus Alltag ein kleines Familienabenteuer werden darf."
          data-i18n-en="Today is a good day for everyday life to turn into a little family adventure."
          data-i18n-da="I dag er en god dag, hvor hverdagen gerne mÃ¥ blive til et lille familieeventyr."
        >
          Heute ist ein guter Tag, an dem aus Alltag ein kleines Familienabenteuer werden darf.
        </p>
      </div>
    </header>

    <!-- =========================================
         HEADER-MENÃœ (â˜°)
         ========================================= -->
    <div
      id="app-menu"
      class="app-menu"
      role="dialog"
      aria-modal="true"
      aria-labelledby="app-menu-title"
      aria-hidden="true"
      hidden
      data-focus-trap="true"
    >
      <div class="app-menu-backdrop" data-menu-close="1" aria-hidden="true"></div>

      <div class="app-menu-panel" tabindex="-1">
        <div class="focus-guard" tabindex="0" data-focus-guard="start" aria-hidden="true"></div>

        <h2 id="app-menu-title" class="sr-only">MenÃ¼</h2>

        <div class="app-menu-list">
          <!-- Info -->
          <button
            id="btn-help"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-info"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              data-i18n-de="Ãœber Family Spots Map"
              data-i18n-en="About Family Spots Map"
              data-i18n-da="Om Family Spots Map"
            >
              Ãœber Family Spots Map
            </span>
          </button>

          <!-- Nur Karte -->
          <button
            id="btn-toggle-view"
            class="app-menu-item"
            type="button"
            aria-pressed="false"
            aria-controls="sidebar"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-map"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              data-i18n-de="Nur Karte"
              data-i18n-en="Map only"
              data-i18n-da="Kun kort"
            >
              Nur Karte
            </span>
          </button>

          <!-- Zur Spot-Liste springen (âœ… wird unten per Script zuverlÃ¤ssig gemacht) -->
          <button
            id="btn-skip-spots"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-map"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              id="skip-to-spots-label"
              data-i18n-de="Zur Spot-Liste springen"
              data-i18n-en="Jump to spot list"
              data-i18n-da="GÃ¥ til spotlisten"
            >
              Zur Spot-Liste springen
            </span>
          </button>

          <!-- Theme-Toggle -->
          <button
            id="theme-toggle"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
            aria-pressed="false"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-moon"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              id="theme-toggle-label"
              data-i18n-de="Designmodus wechseln"
              data-i18n-en="Switch color theme"
              data-i18n-da="Skift design-tilstand"
            >
              Designmodus wechseln
            </span>
          </button>

          <!-- UI Reset (Spots) âœ… verstÃ¤ndlich umbenannt -->
          <button
            id="btn-reset-ui"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                <use href="#i-close"></use>
              </svg>
            </span>

            <span
              class="app-menu-item-label"
              data-i18n-de="Alles zurÃ¼cksetzen"
              data-i18n-en="Reset everything"
              data-i18n-da="Nulstil alt"
            >
              Alles zurÃ¼cksetzen
            </span>
          </button>

          <!-- Standort -->
          <button
            id="btn-locate"
            class="app-menu-item"
            type="button"
            data-menu-close="1"
          >
            <span class="app-menu-item-icon" aria-hidden="true">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-pin"></use></svg>
            </span>
            <span
              class="app-menu-item-label"
              id="btn-locate-label"
              data-i18n-de="Eigenen Standort auf der Karte anzeigen"
              data-i18n-en="Center map on your location"
              data-i18n-da="Vis din egen position pÃ¥ kortet"
            >
              Eigenen Standort auf der Karte anzeigen
            </span>
          </button>
        </div>

        <!-- Sprache: Flaggen-Chips -->
        <div class="app-menu-languages" role="group" aria-labelledby="menu-language-label">
          <p
            id="menu-language-label"
            class="app-menu-languages-label"
            data-i18n-de="Sprache"
            data-i18n-en="Language"
            data-i18n-da="Sprog"
          >
            Sprache
          </p>

          <div class="app-menu-languages-row">
            <button type="button" class="app-menu-lang-chip" data-lang-target="de" aria-pressed="true">
              <span class="app-menu-lang-flag" aria-hidden="true">ğŸ‡©ğŸ‡ª</span>
              <span class="app-menu-lang-code">DE</span>
            </button>
            <button type="button" class="app-menu-lang-chip" data-lang-target="da" aria-pressed="false">
              <span class="app-menu-lang-flag" aria-hidden="true">ğŸ‡©ğŸ‡°</span>
              <span class="app-menu-lang-code">DA</span>
            </button>
            <button type="button" class="app-menu-lang-chip" data-lang-target="en" aria-pressed="false">
              <span class="app-menu-lang-flag" aria-hidden="true">ğŸ‡¬ğŸ‡§</span>
              <span class="app-menu-lang-code">EN</span>
            </button>
          </div>
        </div>

        <div class="focus-guard" tabindex="0" data-focus-guard="end" aria-hidden="true"></div>
      </div>
    </div>

    <!-- =========================================
         MAIN
         ========================================= -->
    <main class="app-main" id="main-content" role="main" tabindex="-1">
      <!-- =======================
           MAP VIEW
           ======================= -->
      <section id="view-map" class="view view--active" aria-label="Karte">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" aria-labelledby="spots-title">
          <!-- Tilla-Begleiterin -->
          <section
            id="tilla-section"
            class="sidebar-section tilla-sidebar-section"
            aria-labelledby="tilla-title"
          >
            <header class="sidebar-section-header">
              <h2
                class="sidebar-section-title"
                id="tilla-title"
                data-i18n-de="Familien-Begleiterin Tilla"
                data-i18n-en="Family companion Tilla"
                data-i18n-da="Familieledsageren Tilla"
              >
                Familien-Begleiterin Tilla
              </h2>
            </header>

            <div class="tilla-sidebar-card">
              <div class="tilla-sidebar-avatar">
                <img
                  src="assets/tilla/tilla-hero.png"
                  alt="Tilla die SchildkrÃ¶te â€“ eure ruhige Familienbegleiterin"
                  loading="eager"
                  decoding="async"
                  fetchpriority="high"
                  width="512"
                  height="512"
                />
              </div>

              <div class="tilla-sidebar-text">
                <p
                  id="tilla-sidebar-text"
                  data-i18n-de="Ich bin Tilla, eure kleine SchildkrÃ¶te. Alltag darf auch leicht sein. Lass uns schauen, welcher Ort in eurer NÃ¤he euch heute ein LÃ¤cheln zaubert. ğŸŒ¿"
                  data-i18n-en="Iâ€™m Tilla, your little turtle companion. Everyday life can feel light, too. Letâ€™s see which nearby place might bring a smile to you today. ğŸŒ¿"
                  data-i18n-da="Jeg er Tilla, jeres lille skildpadde. Hverdagen mÃ¥ ogsÃ¥ gerne fÃ¸les let. Lad os se, hvilket sted i nÃ¦rheden der i dag kan trylle et smil frem hos jer. ğŸŒ¿"
                >
                  Ich bin Tilla, eure kleine SchildkrÃ¶te. Alltag darf auch leicht sein. Lass uns schauen, welcher Ort
                  in eurer NÃ¤he euch heute ein LÃ¤cheln zaubert. ğŸŒ¿
                </p>

                <div class="tilla-sidebar-actions">
                  <button id="btn-play-idea" type="button" class="btn btn-small btn-play-idea">
                    <span class="tilla-play-emoji" aria-hidden="true">
                      <svg class="icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-dice"></use></svg>
                    </span>
                    <span
                      data-i18n-de="Spielideen fÃ¼r unterwegs"
                      data-i18n-en="Play ideas on the go"
                      data-i18n-da="LegidÃ©er til turen"
                    >
                      Spielideen fÃ¼r unterwegs
                    </span>
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Onboarding-Hinweis (VOR den Filtern) -->
          <section
            class="sidebar-section fsm-onboarding-hint"
            data-onboarding-hint
            aria-label="Kurzer Start-Hinweis zur Karte"
          >
            <p class="fsm-onboarding-hint__text">
              <strong
                data-i18n-de="So holt ihr euch euren Spot fÃ¼r heute:"
                data-i18n-en="How to find your spot for today:"
                data-i18n-da="SÃ¥dan finder I dagens spot:"
              >
                So holt ihr euch euren Spot fÃ¼r heute:
              </strong>
              <br />
              <span
                data-i18n-de="1. Standort freigeben oder in eure Region zoomen"
                data-i18n-en="1. Share your location or zoom into your region"
                data-i18n-da="1. Del jeres position eller zoom ind pÃ¥ jeres omrÃ¥de"
              >
                1. Standort freigeben oder in eure Region zoomen
              </span>
              <br />
              <span
                data-i18n-de="2. Stimmung wÃ¤hlen"
                data-i18n-en="2. Choose a mood"
                data-i18n-da="2. VÃ¦lg stemning"
              >
                2. Stimmung wÃ¤hlen
              </span>
              <br />
              <span
                data-i18n-de="3. Auf einen Spot tippen â€“ los gehtâ€™s."
                data-i18n-en="3. Tap a spot â€“ and off you go."
                data-i18n-da="3. Tryk pÃ¥ et spot â€“ sÃ¥ er I i gang."
              >
                3. Auf einen Spot tippen â€“ los gehtâ€™s.
              </span>
            </p>

            <button type="button" class="fsm-onboarding-hint__close" aria-label="Hinweis schlieÃŸen">
              <svg class="icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><use href="#i-close"></use></svg>
            </button>
          </section>

          <!-- Kompakter Filter -->
          <section class="sidebar-section" id="filter-section" aria-labelledby="filter-title">
            <header class="sidebar-section-header">
              <h2
                class="sidebar-section-title"
                id="filter-title"
                data-i18n-de="Filter"
                data-i18n-en="Filters"
                data-i18n-da="Filtre"
              >
                Filter
              </h2>

              <button
                id="btn-toggle-filters"
                class="btn-ghost btn-small"
                type="button"
                aria-controls="filter-section"
                aria-expanded="false"
              >
                <span
                  data-i18n-de="Filter anzeigen"
                  data-i18n-en="Show filters"
                  data-i18n-da="Vis filtre"
                >
                  Filter anzeigen
                </span>
              </button>
            </header>

            <p
              class="filter-group-helper filter-group-helper--compact"
              data-i18n-de="Suche, Stimmung &amp; Radius â€“ alles, was ihr fÃ¼r den Start braucht. Weitere Filter Ã¶ffnen sich bei Bedarf."
              data-i18n-en="Search, mood &amp; radius â€“ everything you need to get started. Open all filters only when needed."
              data-i18n-da="SÃ¸gning, stemning &amp; radius â€“ alt det vigtigste til at starte med. Ã…bn alle filtre efter behov."
            >
              Suche, Stimmung &amp; Radius â€“ alles, was ihr fÃ¼r den Start braucht. Weitere Filter Ã¶ffnen sich bei
              Bedarf.
            </p>

            <!-- Suche -->
            <div class="filter-group">
              <label
                class="filter-group-label"
                for="filter-search"
                id="filter-search-label"
                data-i18n-de="Suche"
                data-i18n-en="Search"
                data-i18n-da="SÃ¸g"
              >
                Suche
              </label>
              <input
                id="filter-search"
                name="search"
                class="input"
                type="search"
                placeholder="Ort, Spot, Stichwort â€¦"
                autocomplete="off"
                enterkeyhint="search"
                inputmode="search"
                data-i18n-de="Ort, Spot, Stichwort â€¦"
                data-i18n-en="Place, spot, keywords â€¦"
                data-i18n-da="Sted, spot, sÃ¸geord â€¦"
              />
            </div>

            <!-- Stimmung -->
            <div class="filter-group">
              <label
                class="filter-group-label"
                id="filter-mood-label"
                data-i18n-de="Stimmung"
                data-i18n-en="Mood"
                data-i18n-da="Stemning"
              >
                Stimmung
              </label>

              <p
                class="filter-group-helper filter-group-helper--compact"
                id="filter-mood-helper"
                data-i18n-de="Ruhe, Bewegung, Wasser oder ein Tag mit Tieren?"
                data-i18n-en="Calm, movement, water or a day with animals?"
                data-i18n-da="Ro, bevÃ¦gelse, vand eller en dag med dyr?"
              >
                Ruhe, Bewegung, Wasser oder ein Tag mit Tieren?
              </p>

              <div
                class="mood-row"
                role="group"
                aria-labelledby="filter-mood-label"
                aria-describedby="filter-mood-helper"
              >
                <button type="button" class="mood-chip" data-mood="relaxed" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">ğŸŒ¿</span>
                  <span class="mood-chip-label" id="mood-relaxed-label"
                    data-i18n-de="Entspannt" data-i18n-en="Relaxed" data-i18n-da="Afslappet"
                  >
                    Entspannt
                  </span>
                </button>

                <button type="button" class="mood-chip" data-mood="action" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">â›°ï¸</span>
                  <span class="mood-chip-label" id="mood-action-label"
                    data-i18n-de="Bewegung" data-i18n-en="Active" data-i18n-da="Aktiv"
                  >
                    Bewegung
                  </span>
                </button>

                <button type="button" class="mood-chip" data-mood="water" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">ğŸ’§</span>
                  <span class="mood-chip-label" id="mood-water-label"
                    data-i18n-de="Wasser &amp; Sand" data-i18n-en="Water &amp; sand" data-i18n-da="Vand &amp; sand"
                  >
                    Wasser &amp; Sand
                  </span>
                </button>

                <button type="button" class="mood-chip" data-mood="animals" aria-pressed="false">
                  <span class="mood-chip-emoji" aria-hidden="true">ğŸ¾</span>
                  <span class="mood-chip-label" id="mood-animals-label"
                    data-i18n-de="Tier-Tag" data-i18n-en="Animal day" data-i18n-da="Dyredag"
                  >
                    Tier-Tag
                  </span>
                </button>
              </div>
            </div>

            <!-- Micro-Abenteuer-Radius -->
            <div class="filter-group">
              <label
                class="filter-group-label"
                for="filter-radius"
                id="filter-radius-label"
                data-i18n-de="Micro-Abenteuer-Radius"
                data-i18n-en="Micro-adventure radius"
                data-i18n-da="Mikroeventyr-radius"
              >
                Micro-Abenteuer-Radius
              </label>

              <p
                class="filter-group-helper filter-group-helper--compact"
                id="filter-radius-helper"
                data-i18n-de="Wie weit darf euer Abenteuer heute gehen?"
                data-i18n-en="How far may your adventure go today?"
                data-i18n-da="Hvor langt mÃ¥ jeres eventyr rÃ¦kke i dag?"
              >
                Wie weit darf euer Abenteuer heute gehen?
              </p>

              <div class="radius-row">
                <input
                  id="filter-radius"
                  name="radius"
                  type="range"
                  min="0"
                  max="4"
                  step="1"
                  value="4"
                  aria-labelledby="filter-radius-label filter-radius-helper filter-radius-description"
                />
                <span
                  id="filter-radius-max-label"
                  class="radius-max-label"
                  data-i18n-de="Alle Spots"
                  data-i18n-en="All spots"
                  data-i18n-da="Alle spots"
                >
                  Alle Spots
                </span>
              </div>

              <p
                id="filter-radius-description"
                class="radius-description"
                data-i18n-de="Alle Spots â€“ ohne Radiusbegrenzung. Die Karte gehÃ¶rt euch."
                data-i18n-en="All spots â€“ no radius limit. The map is all yours."
                data-i18n-da="Alle spots â€“ ingen radiusbegrÃ¦nsning. Kortet er helt jeres."
              >
                Alle Spots â€“ ohne Radiusbegrenzung. Die Karte gehÃ¶rt euch.
              </p>
            </div>

            <!-- Zusammenfassung & Button "Alle Filter Ã¶ffnen" -->
            <div class="filter-footer">
              <button id="btn-open-filter-modal" class="btn btn-small" type="button">
                <span data-i18n-de="Alle Filter Ã¶ffnen" data-i18n-en="Open all filters" data-i18n-da="Ã…bn alle filtre">
                  Alle Filter Ã¶ffnen
                </span>
              </button>

              <p
                id="filter-summary"
                class="filter-summary"
                data-i18n-de="Aktive Filter: Basisfilter"
                data-i18n-en="Active filters: basic filters"
                data-i18n-da="Aktive filtre: basisfiltre"
              >
                Aktive Filter: Basisfilter
              </p>
            </div>
          </section>

          <!-- Spot-Liste -->
          <details
            class="sidebar-section sidebar-section--grow"
            id="spots-section"
            aria-labelledby="spots-title"
            open
          >
            <summary class="sidebar-section-header">
              <h2 class="sidebar-section-title" id="spots-title">Spots</h2>

              <div class="sidebar-section-actions" aria-label="Spots Optionen">
                <button
                  id="btn-toggle-spots"
                  class="btn-ghost btn-small"
                  type="button"
                  aria-controls="spot-list"
                  aria-expanded="true"
                  data-state="open"
                >
                  <span class="label-open"
                    data-i18n-de="Ausblenden" data-i18n-en="Hide" data-i18n-da="Skjul"
                  >Ausblenden</span>
                  <span class="label-closed hidden"
                    data-i18n-de="Anzeigen" data-i18n-en="Show" data-i18n-da="Vis"
                  >Anzeigen</span>
                </button>
              </div>
            </summary>

            <div id="spot-list" class="spot-list"><!-- Karten via JS --></div>
          </details>
        </aside>

        <!-- Karte + Details -->
        <section class="map-section" aria-label="Karte mit Spots">
          <div id="map" class="map-container" role="region" aria-label="Interaktive Karte"></div>
          <aside
            id="spot-detail"
            class="spot-details spot-details--hidden"
            aria-live="polite"
            aria-atomic="true"
          ></aside>
        </section>

        <!-- Family Spots Plus -->
        <details class="sidebar-section" id="plus-section" aria-labelledby="plus-section-title">
          <summary class="sidebar-section-header">
            <h2 class="sidebar-section-title" id="plus-section-title">Family Spots Plus</h2>
            <button id="btn-toggle-plus" class="btn-ghost btn-small" type="button">
              <span data-i18n-de="Anzeigen" data-i18n-en="Show" data-i18n-da="Vis">Anzeigen</span>
            </button>
          </summary>

          <div class="filter-group">
            <p
              id="plus-status-text"
              data-i18n-de="Family Spots Plus ist nicht aktiviert."
              data-i18n-en="Family Spots Plus is not activated."
              data-i18n-da="Family Spots Plus er ikke aktiveret."
            >
              Family Spots Plus ist nicht aktiviert.
            </p>
          </div>

          <div class="plus-code-form">
            <label
              for="plus-code-input"
              data-i18n-de="Partner-Code eingeben (z. B. von Campingplatz, Kommune oder Sponsor):"
              data-i18n-en="Enter partner code (e.g. from campground, municipality or sponsor):"
              data-i18n-da="Indtast partnerkode (f.eks. fra campingplads, kommune eller sponsor):"
            >
              Partner-Code eingeben (z. B. von Campingplatz, Kommune oder Sponsor):
            </label>

            <div class="plus-code-row">
              <input id="plus-code-input" name="plus-code" class="input" type="text" autocomplete="off" />
              <button id="plus-code-submit" class="btn" type="button">
                <span data-i18n-de="Code aktivieren" data-i18n-en="Activate code" data-i18n-da="AktivÃ©r kode">
                  Code aktivieren
                </span>
              </button>
            </div>

            <p
              class="plus-note"
              data-i18n-de="Family Spots Plus schaltet zusÃ¤tzliche Filter &amp; Spots frei â€“ ganz ohne Abo-Falle."
              data-i18n-en="Family Spots Plus unlocks additional filters &amp; spots â€“ with no subscription trap."
              data-i18n-da="Family Spots Plus lÃ¥ser op for ekstra filtre &amp; spots â€“ helt uden abonnementsfÃ¦lder."
            >
              Family Spots Plus schaltet zusÃ¤tzliche Filter &amp; Spots frei â€“ ganz ohne Abo-Falle.
            </p>
          </div>
        </details>

        <!-- Mein Tag -->
        <details class="sidebar-section" id="daylog-section" aria-labelledby="daylog-section-title">
          <summary class="sidebar-section-header">
            <h2 class="sidebar-section-title" id="daylog-section-title"
              data-i18n-de="Mein Tag ğŸ’š" data-i18n-en="My day ğŸ’š" data-i18n-da="Min dag ğŸ’š"
            >
              Mein Tag ğŸ’š
            </h2>

            <button type="button" class="btn-ghost btn-small" aria-hidden="true" tabindex="-1">
              <span data-i18n-de="Anzeigen" data-i18n-en="Show" data-i18n-da="Vis">Anzeigen</span>
            </button>
          </summary>

          <div class="filter-group">
            <label
              for="daylog-text"
              data-i18n-de="Wie war euer Tag?"
              data-i18n-en="How was your day?"
              data-i18n-da="Hvordan var jeres dag?"
            >
              Wie war euer Tag?
            </label>

            <p
              class="filter-group-helper"
              data-i18n-de="Halte einen kleinen Moment fest, an den ihr euch spÃ¤ter erinnern mÃ¶chtet â€“ wenn du magst, mit einem GruÃŸ an Tilla."
              data-i18n-en="Capture a little moment youâ€™d like to remember later â€“ and if you like, add a small note to Tilla."
              data-i18n-da="Gem et lille Ã¸jeblik, som I gerne vil huske senere â€“ og hvis du har lyst, med en lille hilsen til Tilla."
            >
              Halte einen kleinen Moment fest, an den ihr euch spÃ¤ter erinnern mÃ¶chtet â€“ wenn du magst, mit einem GruÃŸ
              an Tilla.
            </p>

            <textarea
              id="daylog-text"
              name="daylog"
              class="input"
              rows="3"
              placeholder="Heute haben wir einen Ort gefunden, an dem die Zeit kurz langsamer wurde."
            ></textarea>

            <button id="daylog-save" class="btn btn-small" type="button">
              <span data-i18n-de="Speichern ğŸ’¾" data-i18n-en="Save ğŸ’¾" data-i18n-da="Gem ğŸ’¾">Speichern ğŸ’¾</span>
            </button>

            <div class="daylog-meta-row">
              <p
                id="daylog-last-saved"
                class="daylog-last-saved"
                data-i18n-de="Noch nichts gespeichert."
                data-i18n-en="Nothing saved yet."
                data-i18n-da="Ingen gemte endnu."
              >
                Noch nichts gespeichert.
              </p>

              <button id="daylog-clear" class="btn-ghost btn-small daylog-clear-btn hidden" type="button">
                <span data-i18n-de="Eintrag lÃ¶schen" data-i18n-en="Delete entry" data-i18n-da="Slet notat">
                  Eintrag lÃ¶schen
                </span>
              </button>
            </div>

            <div id="daylog-list" class="daylog-list"></div>
          </div>
        </details>
      </section>

      <!-- =========================================
           ABOUT VIEW (DE / DA / EN)
           ========================================= -->
      <section id="view-about" class="view" aria-label="Ãœber Family Spots Map">
        <!-- Deutsch -->
        <article id="page-about-de" class="page page-about" lang="de" aria-hidden="false">
          <h2>Ãœber Family Spots Map</h2>
          <p>
            Family Spots Map ist eine Karte, behutsam gezeichnet fÃ¼r Familienabenteuer â€“<br />
            von Eltern fÃ¼r Eltern.<br />
            Nicht StrÃ¶me aus Listen, nicht anonyme Sterne,<br />
            sondern handverlesene SpielplÃ¤tze, Zoos und Wildparks,<br />
            Wasser-Spots, Museen, Bewegungsparks<br />
            und all die Orte, an denen Kinder wirklich schon gelacht, gestaunt und gespielt haben.
          </p>
          <p>
            Im Mittelpunkt stehen QualitÃ¤t, Sicherheit und echte, geerdete Erlebnisse mit Kindern â€“<br />
            keine Karte, die am grÃ¶ÃŸten sein will,<br />
            sondern eine, auf die ihr euch verlassen kÃ¶nnt,<br />
            wenn ihr mit RucksÃ¤cken, Snacks und ein bisschen Hoffnung im GepÃ¤ck loszieht.
          </p>
          <p>
            Family Spots Map wÃ¤chst aus dem Blick einer jungen Familie,<br />
            die selbst mit Kindern unterwegs ist â€“<br />
            manchmal Ã¼bermÃ¼det, manchmal voller Tatendrang,<br />
            doch immer auf der Suche nach einem guten Ort<br />
            fÃ¼r ein paar leuchtende Stunden zwischendurch.
          </p>
          <p>
            <strong>Tilla, unsere kleine SchildkrÃ¶te, flÃ¼stert uns zu, wie kostbar gemeinsame Zeit ist.</strong><br />
            Sie lÃ¤dt euch ein, das Tempo herauszunehmen,<br />
            kurz durchzuatmen<br />
            und den einen Ort zu finden, an dem aus Minuten<br />
            ein Familienmoment wird, der bleibt.
          </p>

          <hr />
          <h3>So funktioniert Family Spots Map</h3>
          <p>
            <strong>Karte &amp; Filter:</strong> Zoome in eure Region,<br />
            streif mit den Fingern Ã¼ber die Karte<br />
            und lass dir zeigen, was heute zu euch passt â€“<br />
            Spielplatz, Wildpark, Pumptrack<br />
            oder ein Spot, den dein Stichwort herbeiruft.
          </p>
          <p>
            <strong>Spot-Karten:</strong> Jeder Spot bekommt eine kleine BÃ¼hne â€“<br />
            eine kurze Beschreibung, besondere Hinweise<br />
            wie â€Autosafariâ€œ, â€barrierefreiâ€œ oder â€mit Wasser in der NÃ¤heâ€œ<br />
            und â€“ wo mÃ¶glich â€“ das Zeichen, dass wir ihn fÃ¼r euch verifiziert haben.
          </p>
          <p>
            <strong>Favoriten:</strong> Gebt euren Lieblingsorten einen Stern,<br />
            damit sie euch unterwegs auf einen Blick wiederfinden â€“<br />
            auch dann, wenn das Netz gerade leiser wird<br />
            und ihr euch auf euren eigenen Kompass verlasst.
          </p>
          <p>
            <strong>Offline-Grundfunktion:</strong> Die wichtigsten Daten ruhen auf eurem GerÃ¤t,<br />
            damit ihr eure Spots wiederentdeckt,<br />
            selbst wenn der Empfang nur flÃ¼stert<br />
            oder unterwegs kurz ganz verschwindet.
          </p>

          <hr />
          <h3>Kuratiert &amp; verifiziert â€“ unser QualitÃ¤tsversprechen</h3>
          <p>
            Family Spots Map ist keine anonyme Sammelplattform,<br />
            sondern eine lebendige Karte,<br />
            in der jeder Spot bewusst gewÃ¤hlt<br />
            und immer wieder neu angesehen wird.
          </p>
          <p>
            <strong>Verifizierte Spots</strong> tragen ein kleines Versprechen als Label.<br />
            Das heiÃŸt zum Beispiel:<br />
            Der Ort wurde persÃ¶nlich besucht oder grÃ¼ndlich recherchiert,<br />
            Lage, Kategorie und Eckdaten sind geprÃ¼ft<br />
            und besondere Hinweise zu Eintritt, Saison oder Parken<br />
            werden â€“ wo immer mÃ¶glich â€“ ergÃ¤nzt.
          </p>
          <p>
            Und doch bleibt die Welt in Bewegung:<br />
            SpielgerÃ¤te werden erneuert, Wege gesperrt, Regeln angepasst â€“<br />
            prÃ¼ft deshalb bitte immer auch die Schilder vor Ort,<br />
            die aktuellen Informationen der Betreiber<br />
            und euren eigenen Eindruck.
          </p>

          <hr />
          <h3>Family Spots Plus â€“ mehr fÃ¼r Camping, WoMo &amp; Abenteuer</h3>
          <p>
            Neben den Basis-Kategorien Ã¶ffnet <strong>Family Spots Plus</strong> die TÃ¼r<br />
            zu besonderen Spezial-Kategorien â€“<br />
            RastplÃ¤tze mit Spielplatz &amp; Dusche,<br />
            kostenlose StellplÃ¤tze in SpielplatznÃ¤he,<br />
            Wohnmobil-Service-Stationen,<br />
            familienfreundliche CampingplÃ¤tze,<br />
            Bikepacking-Spots und Wege,<br />
            die sich wie kleine Abenteuer-Routen anfÃ¼hlen.
          </p>
          <p>
            Die Karte selbst ist als kleines Jahresabo gedacht,<br />
            fÃ¼r <strong>19,90&nbsp;â‚¬/Jahr</strong> â€“ fÃ¼r alle, die sie gern nutzen<br />
            und dieses Herzensprojekt mittragen wollen.<br />
            Die Plus-Kategorien sind optionale ZusÃ¤tze<br />
            fÃ¼r besondere WÃ¼nsche und kosten<br />
            <strong>2,99&nbsp;â‚¬/Jahr</strong> pro Plus-Paket extra.<br />
            Nach dem Kauf erhÃ¤ltst du einen Plus-Code,<br />
            den du in der App eingibst â€“<br />
            und die Plus-Kategorien Ã¶ffnen sich fÃ¼r dich.
          </p>
          <p>
            <strong>Wie erkenne ich Plus-Kategorien?</strong><br />
            In der Kategorien-Liste tragen Plus-Inhalte ein klares Zeichen â€“<br />
            zum Beispiel â€Â· Plusâ€œ, â€Â· Wasser-Add-on (Plus)â€œ<br />
            oder â€Â· WoMo-Add-on (Plus)â€œ.<br />
            Was keinen Zusatz trÃ¤gt, gehÃ¶rt zur Basis<br />
            und ist Teil der Grundkarte.
          </p>

          <hr />
          <h3>FÃ¼r Kommunen, Destinationen &amp; CampingplÃ¤tze</h3>
          <p>
            Family Spots Map ist nicht nur eine Karte fÃ¼r Familien,<br />
            sondern auch ein Werkzeug fÃ¼r Orte, die bewusst familienfreundlich auftreten mÃ¶chten â€“<br />
            StÃ¤dte, Gemeinden, Tourismusregionen, CampingplÃ¤tze und Ferienanlagen.
          </p>
          <p>Als Partner kÃ¶nnt ihr:</p>
          <ul>
            <li>eure Region oder Anlage mit kuratierten Familien-Spots sichtbar machen,</li>
            <li>eigene Plus-Codes an GÃ¤ste, BÃ¼rgerinnen und BÃ¼rger ausgeben,</li>
            <li>eure familienfreundlichen Angebote klar markieren und hervorheben,</li>
            <li>RÃ¼ckmeldungen aus der Nutzung der Karte nutzen, um Angebote weiterzuentwickeln.</li>
          </ul>
          <p>
            So entsteht aus einer Karte ein Service-Baustein fÃ¼r eure Familienstrategie â€“<br />
            vom familienfreundlichen Campingplatz bis zur â€Kinder &amp; Familienâ€œ-Schwerpunktregion.
          </p>
          <p>
            Interesse an einer Pilotregion oder Kooperation? Schreibe gern an
            <a href="mailto:hallo@familyspotsmap.de?subject=Partneranfrage">hallo@familyspotsmap.de</a>.
          </p>

          <hr />
          <h3>Mitmachen â€“ hilf, die Karte besser zu machen</h3>
          <p>
            Du kennst einen Spot, der hier noch fehlt â€“<br />
            einen besonderen Spielplatz,<br />
            ein verstecktes Natur-Highlight<br />
            oder einen Campingplatz, der sich mit Kindern genau richtig anfÃ¼hlt?
          </p>
          <p>
            Dann melde dich mit den wichtigsten Infos:<br />
            Ort, Kategorie und kurz, warum dieser Platz<br />
            fÃ¼r Familien besonders gut funktioniert.<br />
            Vielleicht ist es der Blick, die Ruhe,<br />
            die eine Schaukel oder das freundliche â€Halloâ€œ vor Ort.
          </p>
          <p>
            Gemeinsam machen wir die Karte Schritt fÃ¼r Schritt besser â€“<br />
            so, wie Familien sie wirklich brauchen.
          </p>

          <hr />
          <h3>Nutzung, Verantwortung &amp; Sicherheit</h3>
          <p>
            Family Spots Map stellt Informationen nach bestem Wissen bereit,<br />
            kann aber keine Garantie fÃ¼r VollstÃ¤ndigkeit,<br />
            Sicherheit oder die Einhaltung aller lokalen Regeln geben.
          </p>
          <p>Bitte achte vor Ort immer auf:</p>
          <ul>
            <li>Beschilderung und alle Hinweise, die der Ort dir gibt,</li>
            <li>Naturschutz-Regeln, Badeaufsicht und das aktuelle Wetter,</li>
            <li>Alter, Mut und FÃ¤higkeiten deiner Kinder.</li>
          </ul>
          <p>
            Die Nutzung erfolgt in eigener Verantwortung â€“<br />
            ihr kennt eure Kinder<br />
            und eure Situation am besten.
          </p>

          <hr />
          <h3>Projektstatus &amp; Version</h3>
          <p>
            Family Spots Map ist ein wachsendes Herzensprojekt.<br />
            Neue Spots, Regionen und Kategorien kommen Schritt fÃ¼r Schritt dazu â€“<br />
            zuerst dort, wo wir selbst mit unseren Kindern unterwegs sind,<br />
            dann gemeinsam mit Partnern und der Community.
          </p>
          <p>Aktuelle Karten-Version: <strong>2025-12-01</strong></p>
          <p>
            Wenn dir die Karte geholfen hat,<br />
            einen guten Tag mit deiner Familie zu verbringen,<br />
            einen Moment der Leichtigkeit zu finden<br />
            oder einen Ort, an den ihr gern zurÃ¼ckdenkt,<br />
            dann hat sie ihren Zweck erfÃ¼llt.
          </p>
        </article>

        <!-- Dansk -->
        <article id="page-about-da" class="page page-about hidden" lang="da" aria-hidden="true">
          <!-- (UnverÃ¤ndert â€“ dein kompletter dÃ¤nischer Text bleibt exakt wie bei dir) -->
          <!-- ... -->
        </article>

        <!-- Englisch -->
        <article id="page-about-en" class="page page-about hidden" lang="en" aria-hidden="true">
          <!-- (UnverÃ¤ndert â€“ dein kompletter englischer Text bleibt exakt wie bei dir) -->
          <!-- ... -->
        </article>
      </section>

      <!-- =========================================
           FILTER-MODAL: ALLE FILTER
           ========================================= -->
      <div
        id="filter-modal"
        class="filter-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="filter-modal-title"
        hidden
        data-focus-trap="true"
      >
        <div class="filter-modal-inner" tabindex="-1">
          <div class="focus-guard" tabindex="0" data-focus-guard="start" aria-hidden="true"></div>

          <header class="filter-modal-header">
            <h2
              id="filter-modal-title"
              data-i18n-de="Alle Filter"
              data-i18n-en="All filters"
              data-i18n-da="Alle filtre"
            >
              Alle Filter
            </h2>

            <button
              id="filter-modal-close"
              class="btn-ghost btn-small filter-modal-close-btn"
              type="button"
            >
              <span
                data-i18n-de="Alle Filter ausblenden"
                data-i18n-en="Hide all filters"
                data-i18n-da="Skjul alle filtre"
              >
                Alle Filter ausblenden
              </span>
            </button>
          </header>

          <div class="filter-modal-body">
            <p
              class="filter-group-helper"
              data-i18n-de="Hier kannst du Schnellfilter, Kategorien, Alter der Kinder und besondere Spots feinjustieren."
              data-i18n-en="Here you can fine-tune quick filters, categories, age and special spots."
              data-i18n-da="Her kan du finjustere hurtigfiltre, kategorier, alder og sÃ¦rlige spots."
            >
              Hier kannst du Schnellfilter, Kategorien, Alter der Kinder und besondere Spots feinjustieren.
            </p>

            <details class="filter-advanced" id="advanced-filters" aria-labelledby="advanced-filters-label" open>
              <summary class="filter-advanced-summary" id="advanced-filters-summary">
                <span
                  class="filter-group-label"
                  id="advanced-filters-label"
                  data-i18n-de="Weitere Filter"
                  data-i18n-en="More filters"
                  data-i18n-da="Flere filtre"
                >
                  Weitere Filter
                </span>
              </summary>

              <p
                class="filter-group-helper"
                data-i18n-de="Hier findest du Schnellfilter, Kategorien, Alter &amp; besondere Spots â€“ fÃ¼r genau das, was heute zu euch passt."
                data-i18n-en="Here you can fine-tune quick filters, categories, age and special spots â€“ for exactly what fits your family today."
                data-i18n-da="Her finder du hurtigfiltre, kategorier, alder og sÃ¦rlige spots â€“ sÃ¥ du kan ramme lige det, der passer til jer i dag."
              >
                Hier findest du Schnellfilter, Kategorien, Alter &amp; besondere Spots â€“ fÃ¼r genau das, was heute zu
                euch passt.
              </p>

              <div class="filter-group" id="filter-tags-group">
                <label
                  class="filter-group-label"
                  id="filter-tags-label"
                  data-i18n-de="Schnellfilter"
                  data-i18n-en="Quick filters"
                  data-i18n-da="Hurtigfiltre"
                >
                  Schnellfilter
                </label>

                <p
                  class="filter-group-helper"
                  id="filter-tags-helper"
                  data-i18n-de="Ein Tipp genÃ¼gt â€“ â€mit Wasserâ€œ, â€ruhigâ€œ, â€Actionâ€œ oder â€Naturpfadâ€œ. Die Karte sortiert fÃ¼r euch vor."
                  data-i18n-en="One tap is enough â€“ â€œwith waterâ€, â€œcalmâ€, â€œactionâ€ or â€œnature trailâ€. The map pre-sorts for you."
                  data-i18n-da="Et enkelt tryk â€“ â€med vandâ€œ, â€roligâ€œ, â€actionâ€œ eller â€naturstiâ€œ. Kortet sorterer for jer."
                >
                  Ein Tipp genÃ¼gt â€“ â€mit Wasserâ€œ, â€ruhigâ€œ, â€Actionâ€œ oder â€Naturpfadâ€œ. Die Karte sortiert fÃ¼r euch vor.
                </p>

                <div
                  id="filter-tags"
                  class="tag-filter-row"
                  role="group"
                  aria-labelledby="filter-tags-label"
                  aria-describedby="filter-tags-helper"
                ></div>
              </div>

              <div class="filter-group">
                <label
                  class="filter-group-label"
                  for="filter-category"
                  id="filter-category-label"
                  data-i18n-de="Kategorie"
                  data-i18n-en="Category"
                  data-i18n-da="Kategori"
                >
                  Kategorie
                </label>

                <select id="filter-category" name="category" class="input">
                  <option value="" data-i18n-de="Alle Kategorien" data-i18n-en="All categories" data-i18n-da="Alle kategorier">
                    Alle Kategorien
                  </option>
                </select>
              </div>

              <div class="filter-group">
                <label
                  class="filter-group-label"
                  for="filter-age"
                  id="filter-age-label"
                  data-i18n-de="Alter der Kinder"
                  data-i18n-en="Age of children"
                  data-i18n-da="BÃ¸rnenes alder"
                >
                  Alter der Kinder
                </label>

                <select id="filter-age" name="age" class="input">
                  <option value="all" id="filter-age-all" data-i18n-de="Alle Altersstufen" data-i18n-en="All age groups" data-i18n-da="Alle aldersgrupper">
                    Alle Altersstufen
                  </option>
                  <option value="0-3" id="filter-age-0-3" data-i18n-de="0â€“3 Jahre" data-i18n-en="0â€“3 years" data-i18n-da="0â€“3 Ã¥r">
                    0â€“3 Jahre
                  </option>
                  <option value="4-9" id="filter-age-4-9" data-i18n-de="4â€“9 Jahre" data-i18n-en="4â€“9 years" data-i18n-da="4â€“9 Ã¥r">
                    4â€“9 Jahre
                  </option>
                  <option value="10+" id="filter-age-10-plus" data-i18n-de="10+ Jahre" data-i18n-en="10+ years" data-i18n-da="10+ Ã¥r">
                    10+ Jahre
                  </option>
                </select>
              </div>

              <div class="filter-group filter-group--checkbox">
                <label class="checkbox-label" id="filter-verified-label">
                  <input id="filter-verified" name="verified" type="checkbox" />
                  <span data-i18n-de="Nur verifizierte Spots" data-i18n-en="Only verified spots" data-i18n-da="Kun verificerede spots">
                    Nur verifizierte Spots
                  </span>
                </label>
              </div>

              <div class="filter-group filter-group--checkbox">
                <label class="checkbox-label" id="filter-big-label">
                  <input id="filter-big-adventures" name="big-adventures" type="checkbox" />
                  <span data-i18n-de="GroÃŸe Abenteuer" data-i18n-en="Big adventures" data-i18n-da="Store eventyr">
                    GroÃŸe Abenteuer
                  </span>
                </label>
              </div>

              <div class="filter-group filter-group--checkbox">
                <label class="checkbox-label" id="filter-favorites-label">
                  <input id="filter-favorites" name="favorites" type="checkbox" />
                  <span data-i18n-de="Nur Favoriten" data-i18n-en="Favourites only" data-i18n-da="Kun favoritter">
                    Nur Favoriten
                  </span>
                </label>
              </div>
            </details>
          </div>

          <footer class="filter-modal-footer">
            <button id="filter-modal-reset" class="btn-ghost" type="button">
              <span data-i18n-de="Filter zurÃ¼cksetzen" data-i18n-en="Reset filters" data-i18n-da="Nulstil filtre">
                Filter zurÃ¼cksetzen
              </span>
            </button>

            <button id="filter-modal-apply" class="btn" type="button">
              <span data-i18n-de="Filter anwenden" data-i18n-en="Apply filters" data-i18n-da="Brug filtre">
                Filter anwenden
              </span>
            </button>
          </footer>

          <div class="focus-guard" tabindex="0" data-focus-guard="end" aria-hidden="true"></div>
        </div>
      </div>
    </main>

    <nav class="bottom-nav" aria-label="Navigation" hidden aria-hidden="true">
      <button class="bottom-nav-item" type="button" data-route="map" aria-pressed="true">
        <span id="bottom-nav-map-label" data-i18n-de="Karte" data-i18n-en="Map" data-i18n-da="Kort">Karte</span>
      </button>
      <button class="bottom-nav-item" type="button" data-route="about" aria-pressed="false">
        <span id="bottom-nav-about-label" data-i18n-de="Ãœber" data-i18n-en="About" data-i18n-da="Om">Ãœber</span>
      </button>
    </nav>

    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>
  </div>

  <div class="landscape-warning" aria-hidden="true">
    <span aria-hidden="true">
      Bitte GerÃ¤t drehen ğŸ“±ğŸ”„ â€“ im Hochformat fÃ¼hlt sich Tilla in der Family Spots Map ein bisschen wohler.
    </span>
  </div>

  <!-- Scripts: Leaflet + MarkerCluster -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin="anonymous"
    defer
  ></script>
  <script
    src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"
    defer
  ></script>

  <!-- Onboarding-Hinweis (ES-Modul) -->
  <script type="module" src="./js/onboarding-hint.js"></script>

  <!-- Details/Summary Fix (ES-Modul) -->
  <script type="module" src="./js/ui/details-summary-fix.js"></script>
  <script type="module" src="./js/ui/spots-collapsible.js"></script>

  <!-- App (ES-Modul) -->
  <script type="module" src="./js/app.js"></script>

  <!-- âœ… Professionelle â€Zur Spot-Liste springenâ€œ-Logik (Ã¼berschreibt Fehlverhalten) -->
  <script>
    (() => {
      const btn = document.getElementById("btn-skip-spots");
      if (!btn) return;

      btn.addEventListener("click", (e) => {
        // Wir Ã¼bernehmen den Klick komplett (falls deine App es aktuell falsch mapped)
        e.preventDefault();
        e.stopImmediatePropagation();

        // Falls gerade About aktiv ist â†’ zurÃ¼ck zur Map (Ã¼ber Router-Button im DOM)
        const mapRouteBtn = document.querySelector('[data-route="map"]');
        const viewMap = document.getElementById("view-map");
        const viewAbout = document.getElementById("view-about");
        const isAboutActive = viewAbout && viewAbout.classList.contains("view--active");
        const isMapActive = viewMap && viewMap.classList.contains("view--active");

        if (isAboutActive && mapRouteBtn) {
          mapRouteBtn.click();
        } else if (!isMapActive && mapRouteBtn) {
          mapRouteBtn.click();
        }

        // Falls â€Nur Karteâ€œ aktiv ist â†’ Sidebar wieder einblenden
        const mapOnlyBtn = document.getElementById("btn-toggle-view");
        if (mapOnlyBtn && mapOnlyBtn.getAttribute("aria-pressed") === "true") {
          mapOnlyBtn.click();
        }

        // Spots Ã¶ffnen & dahin scrollen
        const spotsDetails = document.getElementById("spots-section");
        if (spotsDetails && spotsDetails.tagName.toLowerCase() === "details") {
          spotsDetails.open = true;
        }

        // MenÃ¼ schlieÃŸen (Backdrop triggert deine bestehende Close-Logik)
        const menu = document.getElementById("app-menu");
        const backdrop = menu ? menu.querySelector(".app-menu-backdrop[data-menu-close]") : null;
        if (backdrop) backdrop.click();

        // Scroll + Fokus
        const target = document.getElementById("spot-list") || document.getElementById("spots-section") || document.getElementById("spots-title");
        if (target && typeof target.scrollIntoView === "function") {
          target.scrollIntoView({ behavior: "smooth", block: "start" });
        }
        const focusEl = document.getElementById("spots-title");
        if (focusEl && typeof focusEl.focus === "function") {
          setTimeout(() => focusEl.focus({ preventScroll: true }), 250);
        }
      }, { capture: true });
    })();
  </script>

  <!-- Optional: Fokus-Trap -->
  <script type="module">
    const getFocusable = (root) => {
      const sel = [
        'a[href]',
        'area[href]',
        'button:not([disabled])',
        'input:not([disabled]):not([type="hidden"])',
        'select:not([disabled])',
        'textarea:not([disabled])',
        '[tabindex]:not([tabindex="-1"])'
      ].join(',');
      return Array.from(root.querySelectorAll(sel)).filter(el => {
        const style = window.getComputedStyle(el);
        return style.visibility !== 'hidden' && style.display !== 'none';
      });
    };

    const traps = Array.from(document.querySelectorAll('[data-focus-trap="true"]'));
    traps.forEach((dialog) => {
      dialog.addEventListener('keydown', (e) => {
        if (e.key !== 'Tab') return;
        const focusables = getFocusable(dialog);
        if (!focusables.length) return;

        const first = focusables[0];
        const last = focusables[focusables.length - 1];
        const active = document.activeElement;

        if (e.shiftKey && active === first) {
          e.preventDefault();
          last.focus();
        } else if (!e.shiftKey && active === last) {
          e.preventDefault();
          first.focus();
        }
      });

      dialog.addEventListener('focusin', (e) => {
        if (dialog.hasAttribute('hidden') || dialog.getAttribute('aria-hidden') === 'true') return;
        if (dialog.contains(e.target)) return;
        const focusables = getFocusable(dialog);
        (focusables[0] || dialog).focus();
      });
    });
  </script>

  <!-- Service Worker Registration -->
  <script type="module">
    try {
      if ("serviceWorker" in navigator) {
        const scope = "/Family-Spots-Map/";
        const swUrl = new URL("sw.js", location.origin + scope).toString();
        navigator.serviceWorker.register(swUrl, { scope });
      }
    } catch { /* silent */ }
  </script>
</body>
</html>