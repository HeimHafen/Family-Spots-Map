/* =========================================================================
   DESIGN TOKENS â€” Gruppierte + alphabetisch sortierte Custom Properties
   (Farb-Palette | Neutral | Radius | Schatten | Motion | Borders | Button-Sizes)
   ========================================================================= */

:root {
  /* ðŸŽ¨ Accent & Semantic */
  --accent: var(--accent-solid, #c98655);
  --accent-dark: #a65d38;
  --accent-light: #f7e1d0;
  --accent-soft: rgba(201, 134, 85, 0.32);

  /* ðŸŒ App bg fallback */
  --app-bg-fallback-dark: rgba(2, 6, 23, 0.94);
  --app-bg-fallback-light: var(--fsm-warm-0);

  /* ðŸ“ Borders / strokes */
  --border-soft: 1px solid var(--border-1, rgba(148, 163, 184, 0.16));
  --border-subtle: 1px solid var(--border-2, rgba(148, 163, 184, 0.22));
  --stroke-1: 1px solid var(--border-1, rgba(148, 163, 184, 0.24));
  --stroke-2: 1px solid var(--border-2, rgba(148, 163, 184, 0.32));

  /* ðŸ“ Button sizing */
  --btn-height: 38px;

  /* â­• Radius */
  --radius-pill: 999px;
  --btn-radius: var(--radius-pill);

  /* ðŸ‘€ Elevation / shadows */
  --elevation-xs: var(--elev-1, 0 1px 2px rgba(15, 23, 42, 0.06));
  --elevation-sm: var(--elev-1, 0 1px 3px rgba(15, 23, 42, 0.12));
  --elevation-md: var(--elev-2, 0 4px 10px rgba(15, 23, 42, 0.16));
  --elevation-lg: var(--elev-3, 0 10px 24px rgba(15, 23, 42, 0.22));

  /* âœ¨ Focus ring fallback */
  --focus-ring-default:
    0 0 0 2px #ffffff,
    0 0 0 4px hsla(var(--accent-h, 30), 72%, 52%, 0.55);

  /* ðŸƒ Motion */
  --dur: 160ms;
  --dur-fast: 120ms;
  --dur-slow: 220ms;
  --ease-out: cubic-bezier(0.2, 0.8, 0.2, 1);

  /* âšª Neutral surfaces */
  --neutral-0: var(--surface-1, #ffffff);
  --neutral-1: var(--surface-2, #f9fafb);
  --neutral-2: var(--surface-3, #f3f4f6);

  /* ðŸ–Š Text colors */
  --text-color: #111827;
  --text-soft: #4b5563;
  --text-strong: #111827;

  /* ðŸŸ¡ Warm fallback palette */
  --fsm-chip-warm: #f1dfcf;
  --fsm-divider-warm: hsla(28, 24%, 40%, 0.22);
  --fsm-surface-warm: #f5e3d4;
  --fsm-warm-0: #f7e1d0;
  --fsm-warm-1: #e7bf9f;
  --fsm-warm-2: #d49a6a;
  --fsm-warm-3: #c98655;
}

[data-theme="dark"] {
  --focus-ring-default:
    0 0 0 2px rgba(2, 6, 23, 0.92),
    0 0 0 4px hsla(var(--accent-h, 30), 72%, 55%, 0.45);
}

/* =========================================================================
   GLOBAL RESET â€” HTML & BODY Background + Safe-Area (iOS)
   ========================================================================= */

html {
  height: 100%;
  background: var(--app-bg, var(--page-bg, var(--app-bg-fallback-light)));
}

body {
  min-height: 100dvh;
  margin: 0;
  background: inherit;
}

[data-theme="dark"] html {
  background: var(--app-bg, var(--page-bg, var(--app-bg-fallback-dark)));
}

[data-theme="dark"] body {
  background: inherit;
}

/* Universal interactive ergonomics (mobile) */
:where(
  button,
  .btn,
  .btn-ghost,
  .btn-play-idea,
  .btn-icon,
  .mood-chip,
  .travel-chip,
  .compass-mode-chip,
  .tag-filter-chip
) {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* =========================================================================
   ACCESSIBILITY â€” Focus Visible
   ========================================================================= */

:where(
  button,
  .language-switcher,
  .btn-icon,
  .btn,
  .btn-ghost,
  .btn-play-idea,
  .mood-chip,
  .travel-chip,
  .compass-mode-chip,
  .tag-filter-chip,
  .bottom-nav-item,
  .input,
  select.input,
  textarea.input,
  .filter-group--checkbox input[type="checkbox"]
):focus-visible {
  outline: none;
  box-shadow: var(--focus-ring, var(--focus-ring-default));
}

/* =========================================================================
   FORM CONTROLS â€” Inputs, Textareas, Select
   ========================================================================= */

/* Basic Select */
select {
  position: relative;
  z-index: 1;
  padding-right: 1.5rem;
  background-color: var(--input-bg);
  color: var(--text-color);
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

/* Input + Textarea + Select */
.input,
textarea.input,
select.input {
  width: 100%;
  padding: 9px 13px;
  border: 1px solid rgba(209, 213, 219, 0.9);
  border-radius: var(--radius-pill);
  font-family: inherit;
  font-size: 14px;
  color: var(--text-color);
  background: var(--input-bg);
  background-clip: padding-box;
  box-shadow: none;
  transition:
    border-color var(--dur) var(--ease-out),
    box-shadow var(--dur) var(--ease-out),
    background-color var(--dur) var(--ease-out);
}

textarea.input {
  border-radius: 16px;
  resize: vertical;
}

:where(.input, textarea.input, select.input):hover {
  border-color: rgba(148, 163, 184, 0.55);
}

.input:focus,
textarea.input:focus,
select.input:focus {
  border-color: hsla(var(--accent-h, 30), 72%, 52%, 0.65);
  box-shadow: 0 0 0 1px hsla(var(--accent-h, 30), 72%, 52%, 0.45);
}

/* Crisp chevron for select */
select.input {
  padding-right: 2.35rem;
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(15, 23, 42, 0.55) 50%),
    linear-gradient(135deg, rgba(15, 23, 42, 0.55) 50%, transparent 50%);
  background-position:
    calc(100% - 18px) 50%,
    calc(100% - 12px) 50%;
  background-size: 6px 6px;
  background-repeat: no-repeat;
}

[data-theme="dark"] select.input {
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(229, 231, 235, 0.7) 50%),
    linear-gradient(135deg, rgba(229, 231, 235, 0.7) 50%, transparent 50%);
}

/* =========================================================================
   COMPONENT â€” Buttons (Primary, Secondary, Ghost, Play-Idea)
   ========================================================================= */

/* Primary / Base */
:where(.btn, .btn-play-idea) {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
  border: none;
  border-radius: var(--btn-radius);
  font-family: inherit;
  letter-spacing: 0.01em;
  text-decoration: none;
  user-select: none;
  cursor: pointer;

  background-color: var(--accent);
  color: #ffffff;
  box-shadow: var(--elevation-sm);

  transition:
    background-color var(--dur) var(--ease-out),
    box-shadow var(--dur) var(--ease-out),
    transform var(--dur-fast) var(--ease-out),
    opacity var(--dur-fast) var(--ease-out);
}

.btn {
  min-height: var(--btn-height);
  padding: 0 1rem;
  font-size: 14px;
  font-weight: 650;
}

.btn:hover {
  background-color: var(--accent-dark);
  box-shadow: var(--elevation-md);
}

.btn:active {
  transform: translateY(1px);
  opacity: 0.98;
  box-shadow: var(--elevation-xs);
}

@supports (background-color: color-mix(in oklab, white, black)) {
  .btn:hover {
    background-color: color-mix(in oklab, var(--accent), black 8%);
  }
}

/* Small */
.btn-small {
  min-height: 30px;
  padding: 0 0.85rem;
  font-size: 13px;
}

/* Secondary */
.btn-secondary {
  background-color: var(--neutral-0);
  color: var(--text-strong);
  border: var(--stroke-2);
  box-shadow: var(--elevation-xs);
}

.btn-secondary:hover {
  background-color: var(--neutral-1);
  box-shadow: var(--elevation-sm);
}

.btn-secondary:active {
  background-color: var(--neutral-2);
}

/* Dark â€” Secondary */
[data-theme="dark"] .btn-secondary {
  background: var(--neutral-0);
  color: var(--text-color);
  border: var(--stroke-2);
  box-shadow: var(--elevation-sm);
}

/* Ghost */
.btn-ghost {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;

  min-height: 32px;
  padding: 0 0.9rem;
  border: 1px solid transparent;
  border-radius: var(--btn-radius);

  background: transparent;
  color: var(--text-soft);
  box-shadow: none;

  font-size: 13px;
  font-weight: 650;

  transition:
    background-color var(--dur-fast) var(--ease-out),
    color var(--dur-fast) var(--ease-out),
    border-color var(--dur-fast) var(--ease-out);
}

.btn-ghost:hover {
  background-color: rgba(15, 23, 42, 0.05);
  border-color: rgba(148, 163, 184, 0.34);
  color: var(--text-strong);
}

.btn-ghost:active {
  background-color: rgba(15, 23, 42, 0.07);
}

/* Dark â€” Ghost */
[data-theme="dark"] .btn-ghost {
  background: transparent;
  color: var(--text-color);
}

[data-theme="dark"] .btn-ghost:hover {
  background-color: rgba(148, 163, 184, 0.14);
  border-color: rgba(148, 163, 184, 0.36);
}

/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
   Play-Idea Variant
   â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */

.btn-play-idea {
  max-width: 100%;
  min-height: 34px;
  padding: 0.3rem 0.85rem;

  gap: 6px;
  white-space: normal;

  font-size: 13px;
  font-weight: 650;
}

.btn-play-idea:hover {
  background-color: var(--accent-dark);
  box-shadow: var(--elevation-md);
}

@supports (background-color: color-mix(in oklab, white, black)) {
  .btn-play-idea:hover {
    background-color: color-mix(in oklab, var(--accent), black 8%);
  }
}

.btn-play-idea:active {
  transform: translateY(1px);
  opacity: 0.98;
  box-shadow: var(--elevation-xs);
}

[data-theme="dark"] .btn-play-idea {
  box-shadow: var(--elevation-md);
}

/* Disabled states */
:where(.btn, .btn-play-idea, .btn-ghost, .btn-icon):disabled,
:where(.btn, .btn-play-idea, .btn-ghost, .btn-icon)[aria-disabled="true"] {
  cursor: not-allowed;
  opacity: 0.55;
  transform: none !important;
  box-shadow: none !important;
  pointer-events: none;
}

/* =========================================================================
   HEADER
   ========================================================================= */

.app-header {
  position: sticky;
  top: 0;
  z-index: 1200;
  padding: calc(env(safe-area-inset-top, 0px) + 10px) 14px 14px;

  background: linear-gradient(180deg, var(--header-bg-top), var(--header-bg-bottom));
  color: var(--header-text-color);

  border-bottom-left-radius: 24px;
  border-bottom-right-radius: 24px;
  box-shadow: var(--header-shadow);
}

:where(html, body, :root)[data-theme="light"] .app-header {
  background: radial-gradient(
    circle at top left,
    var(--fsm-warm-0) 0,
    var(--fsm-warm-1) 52%,
    var(--fsm-warm-2) 100%
  );

  color: var(--text-strong);
  box-shadow: var(--elevation-md);

  --header-text-color: var(--text-strong);
  --header-tagline-bg: rgba(255, 255, 255, 0.56);
  --header-tagline-color: rgba(17, 24, 39, 0.92);
  --header-icon-bg: rgba(255, 255, 255, 0.72);
}

.app-header-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.app-header-left,
.app-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-title {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;

  margin: 0;

  font-size: 24px;
  font-weight: 800;
  letter-spacing: 0.02em;
}

.header-title:focus-visible {
  outline: none;
  box-shadow: none;
}

.header-flag {
  font-size: 20px;
}

.header-tagline {
  display: inline-block;
  margin: 8px auto 0;
  padding: 8px 20px;

  background: var(--header-tagline-bg);
  color: var(--header-tagline-color);

  border-radius: var(--radius-pill);
  box-shadow: var(--elevation-sm);

  font-size: 14px;
  font-weight: 650;
}

/* =========================================================================
   HEADER MENU
   ========================================================================= */

.app-menu {
  position: fixed;
  inset: 0;
  z-index: 1800;
  display: none;
}

.app-menu[hidden] {
  display: none !important;
}

body:not([data-menu-open="1"]) .app-menu {
  display: none !important;
}

body[data-menu-open="1"] .app-menu {
  display: block;
}

.app-menu-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.35);
}

.app-menu-panel {
  position: absolute;
  top: calc(env(safe-area-inset-top, 0px) + 52px);
  right: 14px;
  left: 14px;

  max-width: 420px;
  margin-left: auto;

  padding: 10px 10px 12px;
  border-radius: 24px;

  background: var(--card-bg, rgba(255, 255, 255, 0.98));
  border: 1px solid var(--card-border, rgba(148, 163, 184, 0.16));
  box-shadow: var(--elevation-lg);

  height: auto;
  max-height: min(70vh, calc(100vh - env(safe-area-inset-top, 0px) - 84px));
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

[data-theme="dark"] .app-menu-panel {
  background: var(--card-bg, rgba(15, 23, 42, 0.99));
  border-color: var(--card-border, rgba(255, 255, 255, 0.08));
  box-shadow: var(--elevation-lg);
}

.app-menu-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 8px;
}

.app-menu-item {
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: 10px;

  padding: 7px 14px;
  border: none;
  border-radius: 999px;

  background: var(--neutral-0);
  color: var(--text-strong);
  border: var(--stroke-1);
  box-shadow: var(--elevation-sm);

  font-size: 14px;
  font-weight: 650;

  cursor: pointer;

  transition:
    background-color var(--dur) var(--ease-out),
    box-shadow var(--dur) var(--ease-out),
    transform var(--dur-fast) var(--ease-out);
}

.app-menu-item:hover {
  background-color: var(--neutral-1);
  box-shadow: var(--elevation-md);
}

.app-menu-item:active {
  transform: translateY(1px);
  background-color: var(--neutral-2);
  box-shadow: var(--elevation-xs);
}

[data-theme="dark"] .app-menu-item {
  background: var(--neutral-0);
  color: var(--text-color);
  border: var(--stroke-1);
  box-shadow: var(--elevation-md);
}

.app-menu-languages {
  margin-top: 4px;
  padding-top: 6px;
  border-top: var(--border-soft);
}

[data-theme="dark"] .app-menu-languages {
  border-top-color: rgba(148, 163, 184, 0.25);
}

.app-menu-languages-label {
  margin: 0 0 4px;
  color: var(--text-soft);

  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.app-menu-languages-row {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.app-menu-lang-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;

  padding: 5px 10px;
  border: none;
  border-radius: 999px;

  background: var(--neutral-1);
  color: var(--text-strong);
  box-shadow: var(--elevation-xs);

  font-size: 13px;
  font-weight: 650;

  cursor: pointer;

  transition:
    background-color var(--dur) var(--ease-out),
    box-shadow var(--dur) var(--ease-out);
}

.app-menu-lang-chip:hover {
  background: var(--neutral-0);
  box-shadow: var(--elevation-sm);
}

[data-theme="dark"] .app-menu-lang-chip {
  background: var(--neutral-1);
  color: var(--text-color);
  box-shadow: var(--elevation-sm);
}

.app-menu-lang-chip--active {
  background: var(--accent-soft);
  color: var(--on-accent, #1f2937);
  box-shadow: var(--elevation-md);
}

[data-theme="dark"] .app-menu-lang-chip--active {
  background: var(--accent);
  color: var(--on-light, #111827);
}

/* =========================================================================
   MAIN LAYOUT
   ========================================================================= */

.app-main {
  flex: 1;
  width: 100%;
  max-width: 1120px;
  margin: 0 auto;
  padding: 16px 12px calc(96px + env(safe-area-inset-bottom, 0px));
}

.view {
  display: none;
}

.view--active {
  display: block;
}

#view-map {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.sidebar {
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: transparent;
}

[data-theme="dark"] #view-map {
  background: linear-gradient(to bottom, rgba(2, 6, 23, 0.88) 0, rgba(2, 6, 23, 0.88) 100%);
  border-radius: 0 0 28px 28px;
}

/* Sidebar sections */
.sidebar-section {
  padding: 12px 14px 14px;

  background: var(--sidebar-section-bg);
  border: 1px solid var(--sidebar-section-border);
  border-radius: 20px;
  box-shadow: var(--sidebar-section-shadow);
}

.sidebar > .sidebar-section + .sidebar-section {
  margin-top: 0;
}

.sidebar-section + .sidebar-section {
  margin-top: 10px;
}

/* Map card area */
.map-section {
  position: relative;
  min-height: 320px;
  margin-top: 14px;
  margin-bottom: 14px;

  overflow: hidden;

  background: var(--map-card-bg);
  border: 1px solid var(--map-card-border);
  border-radius: 22px;
  box-shadow: var(--map-card-shadow);
}

/* =========================================================================
   TAGS, FILTERS & CHIPS
   ========================================================================= */

/* Filter Row */
.filter-group {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* Individual Chips */
.tag-filter-chip,
.mood-chip,
.travel-chip,
.compass-mode-chip {
  padding: 6px 12px;
  border: none;
  border-radius: 999px;

  background: var(--neutral-0);
  color: var(--text-strong);
  border: var(--stroke-1);
  box-shadow: var(--elevation-xs);

  font-size: 13px;
  font-weight: 650;

  cursor: pointer;

  transition:
    background-color var(--dur) var(--ease-out),
    box-shadow var(--dur) var(--ease-out);
}

.tag-filter-chip:hover,
.mood-chip:hover,
.travel-chip:hover,
.compass-mode-chip:hover {
  background-color: var(--neutral-1);
  box-shadow: var(--elevation-sm);
}

.tag-filter-chip:active,
.mood-chip:active,
.travel-chip:active,
.compass-mode-chip:active {
  background-color: var(--neutral-2);
  box-shadow: var(--elevation-xs);
}

.tag-filter-chip--active,
.mood-chip--active,
.travel-chip--active,
.compass-mode-chip--active {
  background: var(--accent-soft);
  color: var(--on-accent, #1f2937);
  box-shadow: var(--elevation-md);
}

[data-theme="dark"] .tag-filter-chip--active,
[data-theme="dark"] .mood-chip--active,
[data-theme="dark"] .travel-chip--active,
[data-theme="dark"] .compass-mode-chip--active {
  background: var(--accent);
  color: var(--on-light, #ffffff);
}

/* =========================================================================
   SPOT CARDS / LISTS / DETAILS
   ========================================================================= */

.spot-card {
  display: flex;
  flex-direction: column;
  gap: 6px;

  padding: 12px 16px;

  background: var(--card-bg, #ffffff);
  border-radius: 18px;
  border: var(--stroke-1);
  box-shadow: var(--elevation-sm);

  cursor: pointer;

  transition:
    background-color var(--dur) var(--ease-out),
    box-shadow var(--dur) var(--ease-out);
}

.spot-card:hover {
  background-color: var(--neutral-1);
  box-shadow: var(--elevation-md);
}

[data-theme="dark"] .spot-card {
  background: var(--card-bg, #0f172a);
  color: var(--text-color);
}

.spot-detail {
  margin-top: 12px;
  padding: 16px;

  background: var(--detail-bg, #ffffff);
  border-radius: 18px;
  border: var(--stroke-2);
  box-shadow: var(--elevation-lg);
}

/* =========================================================================
   TOAST / FEEDBACK
   ========================================================================= */

.toast {
  position: fixed;
  left: 50%;
  bottom: calc(16px + env(safe-area-inset-bottom));
  transform: translateX(-50%);
  z-index: 2000;

  padding: 10px 20px;

  background: var(--toast-bg, rgba(0, 0, 0, 0.8));
  color: #ffffff;

  border-radius: 999px;
  box-shadow: var(--elevation-lg);

  font-size: 14px;
  font-weight: 650;
}

/* =========================================================================
   BOTTOM NAVIGATION
   ========================================================================= */

.bottom-nav {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1500;

  height: 72px;
  padding: 6px 14px env(safe-area-inset-bottom, 8px);

  display: flex;
  align-items: center;
  justify-content: space-between;

  background: var(--bottom-nav-bg);
  border-top: var(--stroke-1);
  box-shadow: var(--elevation-md);
  backdrop-filter: blur(14px);
}

.bottom-nav-item {
  flex: 1;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;

  padding: 6px;
  border-radius: 12px;

  color: var(--text-soft);
  font-size: 12px;
  font-weight: 650;

  transition: color var(--dur-fast) var(--ease-out);
}

.bottom-nav-item--active {
  color: var(--accent);
}

/* =========================================================================
   MEDIA QUERIES â€” Custom Responsive Tokens
   ========================================================================= */

@custom-media --break-sm (width >= 480px);
@custom-media --break-md (width >= 768px);
@custom-media --break-lg (width >= 1024px);
@custom-media --break-xl (width >= 1280px);

/* =========================================================================
   UTILITY â€” prefers-reduced-motion
   ========================================================================= */

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}