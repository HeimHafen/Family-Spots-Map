/* =========================================
   theme.css — Light & Dark Design Tokens
   Playful Warm v2 (Premium Dark) — warmer / more orange + soft pastel
   - semantic tokens as source of truth
   - warm neutral ramp (light)
   - stroke-first dark materials (no white cards)
   - compatible legacy mappings
   - OS fallback when no manual theme is set
   ========================================= */

/* =========================================================
   1) Global Design Tokens (Light Base)
   ========================================================= */
:root {
  color-scheme: light;

  /* ================================
     Brand / Accent System (warmer + less knallig)
     ================================ */
  /* Slightly warmer towards orange (vs 32) */
  --accent-h: 30;

  /* Pastel-leaning primary (lower saturation, slightly higher lightness) */
  --accent: hsl(var(--accent-h), 74%, 52%);
  --accent-light: hsl(var(--accent-h), 72%, 62%);
  --accent-dark: hsl(var(--accent-h), 72%, 40%);

  /* Accent surfaces (light uses real HSL, dark overrides to alpha) */
  --accent-soft: hsl(var(--accent-h), 66%, 90%);
  --accent-soft-hover: hsl(var(--accent-h), 64%, 85%);
  --accent-strong: hsl(var(--accent-h), 66%, 44%);

  /* ================================
     Semantic Color Tokens
     ================================ */
  /* Text (warm, readable) */
  --text-3: hsl(22, 55%, 14%); /* headings/strong */
  --text-1: hsl(24, 45%, 18%); /* body */
  --text-2: hsl(24, 25%, 32%); /* secondary/meta */

  /* On-color (text on colored surfaces) */
  --on-accent: hsl(24, 45%, 14%);
  --on-dark: hsl(32, 100%, 95%);
  --on-light: hsl(222, 47%, 11%);

  /* Surfaces (cream -> biscuit) */
  --surface-0: hsl(34, 100%, 97%);             /* app base */
  --surface-1: hsla(33, 100%, 95%, 0.98);      /* cards/sections */
  --surface-2: hsla(33, 100%, 92%, 0.98);      /* elevated */
  --surface-3: hsla(32, 100%, 89%, 0.98);      /* chips/pills */

  /* Borders (warm tinted, NOT white) */
  --border-1: hsla(28, 55%, 35%, 0.14);
  --border-2: hsla(28, 55%, 35%, 0.20);

  /* ================================
     Elevation (Unified Shadows) — warm tint
     ================================ */
  --elev-1: 0 1px 2px hsla(26, 35%, 20%, 0.10);
  --elev-2: 0 8px 22px hsla(26, 40%, 22%, 0.16);
  --elev-3: 0 16px 46px hsla(26, 45%, 24%, 0.20);

  /* ================================
     Radii / Motion / Typography
     ================================ */
  --radius-pill: 999px;
  --border-radius: 0.5rem;

  --transition-fast: 150ms ease;

  --font-stack: "Segoe UI", Roboto, sans-serif;
  --font-size-base: 1rem;

  /* Focus ring (warmer + softer) */
  --focus-inner: #ffffff;
  --focus-outer: hsla(var(--accent-h), 72%, 52%, 0.55);
  --focus-ring: 0 0 0 2px var(--focus-inner), 0 0 0 4px var(--focus-outer);

  /* ================================
     Backgrounds / Effects (warmer peach glow)
     ================================ */
  --bg-app:
    radial-gradient(circle at 20% 0%, hsla(var(--accent-h), 74%, 60%, 0.22), transparent 55%),
    radial-gradient(circle at 85% 20%, hsla(34, 100%, 72%, 0.16), transparent 50%),
    linear-gradient(180deg, hsl(34, 100%, 97%), hsl(34, 90%, 92%));

  /* Filters */
  --filter-map: sepia(0.26) saturate(0.92) brightness(1.04)
    contrast(1.02) hue-rotate(-14deg);

  /* =========================================================
     2) Legacy / Component Tokens (compat)
     ========================================================= */

  /* Text (legacy names) */
  --text-color: var(--text-1);
  --text-soft: var(--text-2);
  --text-strong: var(--text-3);

  /* Layout & Card */
  --app-bg: var(--bg-app);

  --card-bg: var(--surface-1);
  --card-shadow: var(--elev-2);
  --card-border: var(--border-1);

  /* UI Components */
  --chip-bg: var(--surface-3);
  --chip-color: var(--text-2);
  --chip-shadow: var(--elev-1);
  --chip-hover-shadow: 0 10px 26px hsla(26, 45%, 24%, 0.18);

  --input-bg: hsl(34, 100%, 94%);
  --input-shadow: 0 4px 10px hsla(26, 45%, 24%, 0.14);

  --button-bg: var(--accent-soft);
  --button-hover-bg: var(--accent-soft-hover);
  --button-text-color: var(--on-accent);

  --toast-bg: hsla(var(--accent-h), 58%, 28%, 0.96);

  /* Header */
  --header-bg-top: hsl(34, 100%, 96%);
  --header-bg-bottom: hsl(31, 100%, 90%);
  --header-shadow: var(--elev-3);
  --header-text-color: var(--text-3);

  --header-tagline-bg: hsla(32, 100%, 94%, 0.95);
  --header-tagline-color: hsl(26, 55%, 22%);
  --header-tagline-shadow: var(--elev-2);

  --header-icon-bg: radial-gradient(
    circle at 30% 20%,
    hsl(33, 100%, 92%) 0%,
    hsl(32, 100%, 80%) 45%,
    hsl(30, 100%, 68%) 100%
  );
  --header-icon-shadow: var(--elev-1);
  --header-icon-border: var(--border-2);

  --language-pill-bg: hsla(34, 100%, 94%, 0.94);
  --language-pill-shadow: var(--elev-1);

  --sidebar-bg: hsl(34, 90%, 92%);
  --sidebar-section-bg: var(--surface-1);
  --sidebar-section-shadow: var(--elev-2);
  --sidebar-section-border: var(--border-1);

  --bottom-nav-backdrop: hsla(30, 100%, 86%, 0.85);
  --bottom-nav-item-bg: var(--surface-1);
  --bottom-nav-item-color: hsl(26, 28%, 30%);
  --bottom-nav-item-active-bg: var(--accent);
  --bottom-nav-item-active-color: #ffffff;

  --map-card-bg: var(--surface-2);
  --map-card-shadow: var(--elev-3);
  --map-card-border: hsla(28, 55%, 35%, 0.16);

  /* Legacy shadow names (mapped) */
  --shadow-soft: var(--elev-1);
  --shadow-strong: var(--elev-2);

  /* Legacy radius circle effect tokens */
  --radius-circle-stroke: hsla(var(--accent-h), 74%, 54%, 0.55);
  --radius-circle-fill: hsla(var(--accent-h), 74%, 54%, 0.16);

  /* Legacy effect token (mapped) */
  --map-filter: var(--filter-map);
}

/* =========================================================
   3) Theme Selectors (manual override)
   - supports data-theme on html OR body OR any root container
   ========================================================= */
:root[data-theme="light"],
html[data-theme="light"],
body[data-theme="light"] {
  color-scheme: light;
}

:root[data-theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
[data-theme="dark"] {
  color-scheme: dark;

  /* ================================
     Semantic Overrides (Dark) — Premium
     ================================ */
  --text-3: hsl(32, 100%, 96%);
  --text-1: hsla(32, 100%, 96%, 0.92);
  --text-2: hsla(215, 18%, 82%, 0.74);

  /* Warm navy surfaces (no white cards) */
  --surface-0: hsl(228, 50%, 6%);
  --surface-1: hsla(222, 40%, 10%, 0.92);
  --surface-2: hsla(222, 38%, 13%, 0.92);
  --surface-3: hsla(222, 34%, 16%, 0.92);

  /* Stroke-first borders */
  --border-1: hsla(0, 0%, 100%, 0.08);
  --border-2: hsla(0, 0%, 100%, 0.14);

  /* Shadows: tighter, darker, premium */
  --elev-1: 0 8px 22px hsla(0, 0%, 0%, 0.55);
  --elev-2: 0 16px 46px hsla(0, 0%, 0%, 0.62);
  --elev-3: 0 24px 70px hsla(0, 0%, 0%, 0.70);

  /* Focus ring for dark */
  --focus-inner: rgba(2, 6, 23, 0.92);
  --focus-outer: hsla(var(--accent-h), 72%, 55%, 0.45);
  --focus-ring: 0 0 0 2px var(--focus-inner), 0 0 0 4px var(--focus-outer);

  /* Dark background with controlled warm glow (aligned to warmer accent) */
  --bg-app:
    radial-gradient(circle at 35% -10%, hsla(var(--accent-h), 74%, 58%, 0.16), transparent 55%),
    radial-gradient(circle at 90% 20%, hsla(34, 100%, 70%, 0.08), transparent 50%),
    linear-gradient(180deg, hsl(228, 50%, 6%), hsl(229, 60%, 5%));

  /* Accent surfaces in dark should be alpha-based (avoid “chalky” blocks) */
  --accent-soft: hsla(var(--accent-h), 74%, 52%, 0.18);
  --accent-soft-hover: hsla(var(--accent-h), 74%, 52%, 0.24);

  /* Map filter */
  --filter-map: grayscale(0.35) sepia(0.28) brightness(0.78)
    contrast(1.05) saturate(0.9) hue-rotate(-16deg);

  /* ================================
     Legacy / Component Overrides (Dark)
     ================================ */
  --text-color: var(--text-1);
  --text-soft: var(--text-2);
  --text-strong: var(--text-3);

  --card-bg: var(--surface-1);
  --card-shadow: var(--elev-2);
  --card-border: var(--border-1);

  --chip-bg: var(--surface-3);
  --chip-color: hsla(32, 100%, 96%, 0.86);
  --chip-shadow: var(--elev-1);
  --chip-hover-shadow: var(--elev-2);

  --input-bg: var(--surface-2);
  --input-shadow: var(--elev-1);

  /* Keep primary buttons warm in dark */
  --button-bg: var(--accent-soft);
  --button-hover-bg: var(--accent-soft-hover);
  --button-text-color: hsl(32, 100%, 96%);

  --toast-bg: hsla(222, 40%, 10%, 0.96);

  --header-bg-top: hsl(228, 45%, 8%);
  --header-bg-bottom: hsl(228, 50%, 6%);
  --header-shadow: var(--elev-3);
  --header-text-color: var(--on-dark);

  /* Tagline: playful but controlled */
  --header-tagline-bg: linear-gradient(
    135deg,
    hsla(var(--accent-h), 74%, 56%, 0.92),
    hsla(34, 96%, 56%, 0.90)
  );
  --header-tagline-color: hsl(24, 45%, 14%);
  --header-tagline-shadow: var(--elev-2);

  --header-icon-bg: radial-gradient(
    circle at 30% 20%,
    hsla(222, 40%, 14%, 0.95) 0%,
    hsla(228, 50%, 6%, 0.98) 55%,
    hsla(228, 50%, 6%, 0.98) 100%
  );
  --header-icon-shadow: var(--elev-1);
  --header-icon-border: var(--border-2);

  --language-pill-bg: var(--surface-3);
  --language-pill-shadow: var(--elev-1);

  --sidebar-bg: var(--surface-0);
  --sidebar-section-bg: var(--surface-1);
  --sidebar-section-shadow: var(--elev-2);
  --sidebar-section-border: var(--border-1);

  --bottom-nav-backdrop: hsla(222, 40%, 10%, 0.92);
  --bottom-nav-item-bg: var(--surface-3);
  --bottom-nav-item-color: hsla(32, 100%, 96%, 0.78);
  --bottom-nav-item-active-bg: hsl(var(--accent-h), 74%, 54%);
  --bottom-nav-item-active-color: hsl(24, 45%, 14%);

  --map-card-bg: var(--surface-0);
  --map-card-shadow: var(--elev-3);
  --map-card-border: var(--border-1);

  --radius-circle-stroke: hsla(var(--accent-h), 74%, 62%, 0.70);
  --radius-circle-fill: hsla(var(--accent-h), 74%, 62%, 0.14);

  --map-filter: var(--filter-map);
}

/* =========================================================
   4) OS Preference Fallback (only if no manual theme set)
   ========================================================= */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    color-scheme: dark;

    /* Minimal semantic overrides (rest follows mappings above) */
    --text-3: hsl(32, 100%, 96%);
    --text-1: hsla(32, 100%, 96%, 0.92);
    --text-2: hsla(215, 18%, 82%, 0.74);

    --surface-0: hsl(228, 50%, 6%);
    --surface-1: hsla(222, 40%, 10%, 0.92);
    --surface-2: hsla(222, 38%, 13%, 0.92);
    --surface-3: hsla(222, 34%, 16%, 0.92);

    --border-1: hsla(0, 0%, 100%, 0.08);
    --border-2: hsla(0, 0%, 100%, 0.14);

    --elev-1: 0 8px 22px hsla(0, 0%, 0%, 0.55);
    --elev-2: 0 16px 46px hsla(0, 0%, 0%, 0.62);
    --elev-3: 0 24px 70px hsla(0, 0%, 0%, 0.70);

    --focus-inner: rgba(2, 6, 23, 0.92);
    --focus-outer: hsla(var(--accent-h), 72%, 55%, 0.45);
    --focus-ring: 0 0 0 2px var(--focus-inner), 0 0 0 4px var(--focus-outer);

    --bg-app:
      radial-gradient(circle at 35% -10%, hsla(var(--accent-h), 74%, 58%, 0.16), transparent 55%),
      radial-gradient(circle at 90% 20%, hsla(34, 100%, 70%, 0.08), transparent 50%),
      linear-gradient(180deg, hsl(228, 50%, 6%), hsl(229, 60%, 5%));

    --accent-soft: hsla(var(--accent-h), 74%, 52%, 0.18);
    --accent-soft-hover: hsla(var(--accent-h), 74%, 52%, 0.24);

    --filter-map: grayscale(0.35) sepia(0.28) brightness(0.78)
      contrast(1.05) saturate(0.9) hue-rotate(-16deg);

    --map-filter: var(--filter-map);
  }
}

@media (prefers-color-scheme: light) {
  :root:not([data-theme]) {
    color-scheme: light;
  }
}